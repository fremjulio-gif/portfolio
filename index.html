<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DAW Portfolio - Jules F</title>
    <link rel="icon" type="image/png" href="moi.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700;800&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <style>
        /* =========================================
           CORE VARIABLES & RESET
           ========================================= */
        :root {
            --glass-surface: rgba(18, 18, 18, 0.7);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-highlight: rgba(255, 255, 255, 0.1);
            --glass-shadow: 0 40px 80px -12px rgba(0, 0, 0, 0.9);
            --glass-text: #ffffff;
            --accent-color: #22c55e; /* Default FL Green */
            --ease-ios: cubic-bezier(0.25, 1, 0.5, 1);
        }

        html, body { 
            max-width: 100vw; overflow-x: hidden; 
            user-select: none; -webkit-user-select: none;
            touch-action: manipulation;
        }
        
        /* CURSEUR CROSSHAIR (Desktop Only) */
        @media (pointer: fine) {
            body, a, button, input, .click-sound, .project-card, .lab-row, canvas { 
                cursor: crosshair !important; 
            }
        }

        body { 
            background-color: #050505; color: var(--glass-text); 
            transition: background-color 0.6s ease, color 0.4s ease;
            margin: 0; padding: 0;
            font-family: 'Arial', sans-serif;
        }

        /* LIGHT MODE (ABLETON STYLE) */
        body.light-mode {
            --glass-surface: rgba(255, 255, 255, 0.25); 
            --glass-border: rgba(255, 255, 255, 0.4);
            --glass-highlight: rgba(255, 255, 255, 0.6);
            --glass-text: #1a1a1a;
            background-color: #888888;
        }
        body.light-mode .project-info { background: linear-gradient(to top, rgba(220,220,220,0.95), transparent); color: black; }
        body.light-mode #theme-label { color: #000; font-weight: 800; text-shadow: none; opacity: 1; }
        body.light-mode .scanlines { opacity: 0.03; }

        /* THEME ANIMATION */
        body.switching-theme .glass-panel { animation: jelly 0.5s var(--ease-ios); }
        @keyframes jelly { 0% { transform: scale(1); } 30% { transform: scale(0.98) brightness(1.2); } 50% { transform: scale(1.01); } 100% { transform: scale(1); } }

        /* FONTS */
        .font-fl { font-family: 'Arial', sans-serif; }
        .font-ableton { font-family: 'Jost', sans-serif; letter-spacing: 0.02em; }
        .font-protools { font-family: 'Avenir Next', 'Helvetica Neue', sans-serif; font-weight: 500; }
        .font-tech { font-family: 'Share Tech Mono', monospace; }

        /* =========================================
           COMPONENTS
           ========================================= */
        .glass-panel {
            background: linear-gradient(160deg, var(--glass-surface) 0%, rgba(255,255,255,0.01) 100%);
            backdrop-filter: blur(40px) saturate(120%); -webkit-backdrop-filter: blur(40px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow), inset 0 1px 0 0 var(--glass-highlight);
            border-radius: 32px; overflow: hidden;
            transition: transform 0.4s var(--ease-ios), border-color 0.3s;
            position: relative; width: 100%;
        }
        .glass-panel:hover { border-color: var(--accent-color); transform: translateY(-4px); }

        .bento-grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 24px; padding: 100px 24px 140px; max-width: 1600px; margin: 0 auto; box-sizing: border-box; }
        .win-header { height: 44px; display: flex; align-items: center; justify-content: space-between; padding: 0 24px; border-bottom: 1px solid var(--glass-border); background: rgba(255,255,255,0.03); }
        .win-title { font-size: 11px; text-transform: uppercase; letter-spacing: 0.15em; font-weight: 800; opacity: 0.6; }

        /* STATS */
        .stat-item { padding: 10px; border-radius: 20px; text-align: center; transition: 0.3s; }
        .stat-item:hover { background: rgba(255,255,255,0.05); }
        .pie-chart { width: 80px; height: 80px; border-radius: 50%; background: conic-gradient(var(--accent-color) calc(var(--percent) * 1%), rgba(255,255,255,0.05) 0); display: grid; place-items: center; margin: 0 auto 1rem; position: relative; }
        .pie-chart::after { content: ''; position: absolute; inset: 8px; background: #111; border-radius: 50%; }
        body.light-mode .pie-chart::after { background: #dcdcdc; }
        .pie-chart span { position: relative; z-index: 10; font-family: 'Share Tech Mono'; font-weight: bold; }

        /* LAB RECORDS (WAVEFORMS) */
        .lab-row { padding: 16px; border-bottom: 1px solid var(--glass-border); transition: 0.2s; position: relative; }
        .lab-row:hover { background: rgba(255,255,255,0.05); }
        .lab-row.playing .text-accent { color: var(--accent-color); text-shadow: 0 0 10px var(--accent-color); }
        
        .waveform-container { 
            height: 40px; background: rgba(0,0,0,0.3); 
            margin-top: 10px; border-radius: 4px; 
            position: relative; overflow: hidden; 
        }
        .waveform-canvas { width: 100%; height: 100%; display: block; opacity: 0.7; }
        .progress-overlay { 
            position: absolute; top: 0; left: 0; height: 100%; 
            background: var(--accent-color); opacity: 0.2; 
            width: 0%; pointer-events: none; border-right: 2px solid var(--accent-color);
        }

        /* PROJECTS */
        .project-card { position: relative; border-radius: 20px; overflow: hidden; aspect-ratio: 16/10; border: 1px solid var(--glass-border); }
        .project-card img { width: 100%; height: 100%; object-fit: cover; transition: 0.6s var(--ease-ios); filter: brightness(0.8); }
        .project-card:hover img { transform: scale(1.1); filter: brightness(1); }
        .project-info { position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: flex-end; padding: 24px; background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); }

        /* SEQUENCER */
        #sequencer-inner { background: rgba(0,0,0,0.3); border-radius: 20px; padding: 20px; position: relative; overflow: hidden; }
        #sequencer-inner::before { content: ''; position: absolute; inset: 0; background: url('console.png'); opacity: 0.15; z-index: 0; pointer-events: none; mix-blend-mode: overlay; }
        
        .sequencer-grid-container { overflow-x: auto; padding-bottom: 20px; -webkit-overflow-scrolling: touch; }
        
        /* Mobile Optimized Buttons */
        .step-btn { 
            height: 36px; min-width: 30px; 
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); 
            border-radius: 4px; position: relative; z-index: 10; 
            touch-action: none; /* Prevents scroll on button tap */
        }
        .step-btn.active { background: var(--accent-color); box-shadow: 0 0 10px var(--accent-color); border-color: transparent; }
        
        .piano-cell { 
            height: 24px; min-width: 30px; 
            border: 1px solid rgba(255,255,255,0.05); background: rgba(255,255,255,0.02); 
            position: relative; z-index: 10; touch-action: none; 
        }
        .piano-cell.active { background: var(--accent-color); opacity: 0.9; }
        .piano-cell.playing, .step-btn.playing { filter: brightness(2) contrast(1.2); }

        /* FADERS */
        .fader-group { display: flex; flex-direction: column; align-items: center; width: 40px; }
        input[type=range][orient=vertical] {
            appearance: none; -webkit-appearance: none;
            width: 100px; height: 30px; background: transparent;
            transform: rotate(-90deg); margin: 35px 0;
        }
        input[type=range][orient=vertical]::-webkit-slider-runnable-track { width: 100%; height: 6px; background: #222; border-radius: 10px; }
        input[type=range][orient=vertical]::-webkit-slider-thumb { -webkit-appearance: none; height: 18px; width: 18px; background: #888; border-radius: 50%; border: 2px solid black; margin-top: -6px; }

        /* LOADING */
        #start-screen { position: fixed; inset: 0; z-index: 999; background: #050505; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: opacity 0.8s; }
        #start-screen.hidden-screen { opacity: 0; pointer-events: none; }
        .loader-bar { width: 200px; height: 4px; background: #222; border-radius: 10px; overflow: hidden; margin-top: 20px; }
        .loader-fill { width: 0%; height: 100%; background: var(--accent-color); animation: load 2s ease-out forwards; }
        @keyframes load { 100% { width: 100%; } }

        /* VISION MODAL */
        #vision-modal { transition: opacity 0.3s; }
        #vision-modal.hidden { opacity: 0; pointer-events: none; }
        .vision-bar-container { background: rgba(255,255,255,0.1); height: 6px; border-radius: 99px; overflow: hidden; }
        .vision-bar-fill { height: 100%; background: var(--accent-color); }
        
        /* BACKGROUND */
        #theme-bg { position: fixed; inset: 0; z-index: -2; background-size: cover; background-position: center; opacity: 0.6; filter: blur(10px) saturate(1.1); transition: 0.8s; }
        .scanlines { position: fixed; inset: 0; z-index: -1; pointer-events: none; background: linear-gradient(to bottom, transparent 50%, rgba(0,0,0,0.2) 50%); background-size: 100% 4px; opacity: 0.1; }

        @media (max-width: 1024px) {
            .bento-grid { display: flex; flex-direction: column; padding: 80px 16px; }
            .col-span-12, .col-span-5, .col-span-7 { width: 100%; }
        }
    </style>
</head>
<body class="font-fl text-white selection:bg-white selection:text-black">

    <div id="start-screen">
        <div onclick="initAudio()" class="flex flex-col items-center cursor-pointer group">
            <h1 class="text-3xl font-bold tracking-[0.3em] text-[var(--accent-color)] mb-2 font-tech">SYSTEM BOOT</h1>
            <p class="text-xs text-gray-500 font-mono">Tap anywhere to Initialize Audio Engine</p>
            <div class="loader-bar"><div class="loader-fill"></div></div>
            <p class="mt-4 text-[10px] text-gray-700 font-mono">JULES_FREMONDIERE_V2.0.exe</p>
        </div>
    </div>

    <div id="theme-bg"></div>
    <div class="scanlines"></div>

    <div class="fixed top-6 left-1/2 -translate-x-1/2 z-50 flex items-center gap-3 bg-black/60 backdrop-blur-xl p-2 rounded-full border border-white/10 shadow-2xl">
        <span id="theme-label" class="text-[10px] font-mono uppercase px-2 opacity-80 hidden md:block">Pick Theme</span>
        <button onclick="setTheme('fl')" class="w-8 h-8 rounded-full bg-white/5 hover:bg-white/20 transition p-1"><img src="logo_flstudio.png" class="w-full h-full object-contain"></button>
        <button onclick="setTheme('ableton')" class="w-8 h-8 rounded-full bg-white/5 hover:bg-white/20 transition p-1"><img src="logo_ableton.png" class="w-full h-full object-contain"></button>
        <button onclick="setTheme('protools')" class="w-8 h-8 rounded-full bg-white/5 hover:bg-white/20 transition p-1"><img src="logo_protools.png" class="w-full h-full object-contain"></button>
    </div>

    <main class="bento-grid">
        
        <section class="col-span-12 glass-panel p-10 flex flex-col items-center justify-center text-center min-h-[50vh]">
            <span class="px-3 py-1 rounded-full border border-white/10 bg-white/5 text-[10px] uppercase tracking-widest mb-6">Portfolio 2026</span>
            <h1 class="text-6xl md:text-8xl font-black text-[var(--accent-color)] mb-2 tracking-tight drop-shadow-2xl">Jules Fr√©mondi√®re</h1>
            <div class="px-4 py-1.5 rounded-full bg-[var(--accent-color)]/10 border border-[var(--accent-color)] text-[var(--accent-color)] text-xs font-bold uppercase tracking-widest mb-6 animate-pulse">üî¥ En recherche de stage</div>
            <p class="text-2xl font-light opacity-80 max-w-2xl mx-auto leading-normal">√âtudiant Ing√©nieur du son & Sound Designer</p>
            <a href="mailto:jules.fremondiere@3is.fr" class="mt-4 font-mono opacity-60 hover:opacity-100 transition">jules.fremondiere@3is.fr</a>
        </section>

        <section class="col-span-12 lg:col-span-5 glass-panel flex flex-col">
            <div class="win-header"><span class="win-title">Stats & Skills.sys</span><div class="flex gap-1.5"><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div></div></div>
            <div class="p-8 grid grid-cols-2 gap-8 items-center justify-items-center flex-1">
                <div class="stat-item"><div class="pie-chart" style="--percent:66"><span>66%</span></div><h4 class="text-xs font-bold uppercase text-[var(--accent-color)] mt-2">Mixage</h4></div>
                <div class="stat-item"><div class="pie-chart" style="--percent:70"><span>70%</span></div><h4 class="text-xs font-bold uppercase text-[var(--accent-color)] mt-2">Compo</h4></div>
                <div class="stat-item"><div class="pie-chart" style="--percent:40"><span>40%</span></div><h4 class="text-xs font-bold uppercase text-[var(--accent-color)] mt-2">Repair</h4></div>
                <div class="stat-item"><div class="pie-chart" style="--percent:70"><span>70%</span></div><h4 class="text-xs font-bold uppercase text-[var(--accent-color)] mt-2">Record</h4></div>
                
                <button onclick="toggleVision()" class="col-span-2 w-full mt-4 px-6 py-4 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition flex items-center justify-center gap-3 group">
                    <span class="text-xs font-mono uppercase tracking-widest text-[var(--accent-color)] group-hover:scale-105 transition">üìÇ Ouvrir Vision.dmg</span>
                </button>
            </div>
        </section>

        <section class="col-span-12 lg:col-span-7 glass-panel h-[600px] flex flex-col">
            <div class="win-header"><span class="win-title">Timeline.log</span></div>
            <div class="p-8 overflow-y-auto flex-1 custom-scrollbar">
                <div class="border-l border-white/10 pl-8 space-y-12">
                    <div class="relative"><div class="absolute -left-[37px] top-1 w-4 h-4 rounded-full border-2 border-[var(--accent-color)] bg-[#111]"></div><span class="text-xs font-mono text-[var(--accent-color)]">2023-2026</span><h3 class="text-xl font-bold">3iS - Institut International</h3><p class="text-sm opacity-60">Bachelor Son √† l'image</p></div>
                    <div class="relative"><div class="absolute -left-[37px] top-1 w-4 h-4 rounded-full border-2 border-white/20 bg-[#111]"></div><span class="text-xs font-mono opacity-50">2023</span><h3 class="text-xl font-bold">Service Civique</h3><p class="text-sm opacity-60">Thermog√®ne M√©dia - Court M√©trage</p></div>
                    <div class="relative"><div class="absolute -left-[37px] top-1 w-4 h-4 rounded-full border-2 border-white/20 bg-[#111]"></div><span class="text-xs font-mono opacity-50">2022</span><h3 class="text-xl font-bold">BAC STI2D</h3><p class="text-sm opacity-60">Option ITEC</p></div>
                    <div class="relative"><div class="absolute -left-[37px] top-1 w-4 h-4 rounded-full border-2 border-white/20 bg-[#111]"></div><span class="text-xs font-mono opacity-50">2018-2022</span><h3 class="text-xl font-bold">Autodidacte</h3><p class="text-sm opacity-60">Exploration MAO & Vid√©o</p></div>
                </div>
            </div>
        </section>

        <section class="col-span-12 glass-panel">
            <div class="win-header"><span class="win-title">explorer.prproj</span></div>
            <div class="p-8">
                <h3 class="text-3xl font-black mb-8 flex items-center gap-2"><span class="text-[var(--accent-color)]">///</span> Projets</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <a href="https://youtu.be/9UOw2Qhdke0" target="_blank" class="project-card group"><img src="https://img.youtube.com/vi/9UOw2Qhdke0/hqdefault.jpg"><div class="project-info"><h4 class="text-2xl font-bold">Je suis la fum√©e...</h4><p class="text-sm opacity-80">Court-m√©trage (Son)</p></div></a>
                    <a href="https://on.soundcloud.com/XCZ6FO4IZUqG5q24R6" target="_blank" class="project-card group"><img src="cover.jpg" class="object-cover object-bottom"><div class="project-info"><h4 class="text-2xl font-bold">Srh - qutumeregardes</h4><p class="text-sm opacity-80">Mix & Master</p></div></a>
                    <a href="https://www.youtube.com/watch?v=D-x6BQSPRuA" target="_blank" class="project-card group"><img src="https://img.youtube.com/vi/D-x6BQSPRuA/maxresdefault.jpg"><div class="project-info"><h4 class="text-2xl font-bold">Capharna√ºm</h4><p class="text-sm opacity-80">Sound Design</p></div></a>
                    <a href="https://www.youtube.com/watch?v=1RaxSos9wtk" target="_blank" class="project-card group"><img src="https://img.youtube.com/vi/1RaxSos9wtk/hqdefault.jpg"><div class="project-info"><h4 class="text-2xl font-bold">IVY</h4><p class="text-sm opacity-80">Remix</p></div></a>
                </div>
            </div>
        </section>

        <section class="col-span-12 glass-panel">
            <div class="win-header"><span class="win-title">lab_records.sh</span></div>
            <div class="p-8">
                <div class="flex items-center gap-3 mb-6 text-[var(--accent-color)]"><span class="animate-pulse">‚óè</span><span class="text-xs font-mono uppercase">Live Monitoring</span></div>
                
                <div class="space-y-4">
                    <div class="lab-row" data-src="rover.mp3">
                        <div class="lab-info"><span class="text-accent font-bold">rover.mp3</span><span class="text-xs opacity-50">Ambient</span></div>
                        <div class="waveform-container" onclick="seekTrack(event, this)"><canvas class="waveform-canvas"></canvas><div class="progress-overlay"></div></div>
                        <button class="mt-2 text-xs font-mono uppercase hover:text-[var(--accent-color)]" onclick="toggleTrack(this)">[ Play / Pause ]</button>
                    </div>
                    <div class="lab-row" data-src="wordsnight.mp3">
                        <div class="lab-info"><span class="text-accent font-bold">wordsnight.mp3</span><span class="text-xs opacity-50">Lo-Fi</span></div>
                        <div class="waveform-container" onclick="seekTrack(event, this)"><canvas class="waveform-canvas"></canvas><div class="progress-overlay"></div></div>
                        <button class="mt-2 text-xs font-mono uppercase hover:text-[var(--accent-color)]" onclick="toggleTrack(this)">[ Play / Pause ]</button>
                    </div>
                    <div class="lab-row" data-src="shadow.mp3">
                        <div class="lab-info"><span class="text-accent font-bold">shadow.mp3</span><span class="text-xs opacity-50">Dark Synth</span></div>
                        <div class="waveform-container" onclick="seekTrack(event, this)"><canvas class="waveform-canvas"></canvas><div class="progress-overlay"></div></div>
                        <button class="mt-2 text-xs font-mono uppercase hover:text-[var(--accent-color)]" onclick="toggleTrack(this)">[ Play / Pause ]</button>
                    </div>
                </div>
                <audio id="global-player"></audio>
            </div>
        </section>

        <section class="col-span-12 glass-panel">
            <div class="win-header"><span class="win-title">Reference_Library</span></div>
            <div class="p-8 grid grid-cols-1 md:grid-cols-2 gap-12">
                <div>
                    <h4 class="text-xs font-bold text-[var(--accent-color)] uppercase mb-4 border-b border-white/10 pb-2">Films / S√©ries</h4>
                    <div class="space-y-4">
                        <a href="https://www.imdb.com/title/tt0903747/" target="_blank" class="inspi-link block"><div class="inspi-card"><img src="pluribus.webp" class="inspi-img"><div><h5 class="font-bold text-sm">Pluribus</h5><p class="text-[10px] opacity-60">SF Minimaliste</p></div></div></a>
                        <a href="https://www.imdb.com/title/tt1190634/" target="_blank" class="inspi-link block"><div class="inspi-card"><img src="theboys.webp" class="inspi-img"><div><h5 class="font-bold text-sm">The Boys</h5><p class="text-[10px] opacity-60">Sound Design</p></div></div></a>
                        <a href="https://www.imdb.com/title/tt6751668/" target="_blank" class="inspi-link block"><div class="inspi-card"><img src="parasite.webp" class="inspi-img"><div><h5 class="font-bold text-sm">Parasite</h5><p class="text-[10px] opacity-60">Baroque</p></div></div></a>
                         <a href="https://www.imdb.com/title/tt8772262/" target="_blank" class="inspi-link block"><div class="inspi-card"><img src="midsommar.webp" class="inspi-img"><div><h5 class="font-bold text-sm">Midsommar</h5><p class="text-[10px] opacity-60">Mix r√©aliste</p></div></div></a>
                    </div>
                </div>
                <div>
                    <h4 class="text-xs font-bold text-[var(--accent-color)] uppercase mb-4 border-b border-white/10 pb-2">Albums</h4>
                     <div class="space-y-4">
                        <a href="https://www.discogs.com/artist/191828-Mike-Dean" target="_blank" class="inspi-link block"><div class="inspi-card"><img src="425.webp" class="inspi-img"><div><h5 class="font-bold text-sm">Mike Dean "425"</h5><p class="text-[10px] opacity-60">Synth√©tique</p></div></div></a>
                        <a href="#" target="_blank" class="inspi-link block"><div class="inspi-card"><img src="ftp.webp" class="inspi-img"><div><h5 class="font-bold text-sm">Femtogo</h5><p class="text-[10px] opacity-60">Jazz/Rap</p></div></div></a>
                        <a href="#" target="_blank" class="inspi-link block"><div class="inspi-card"><img src="pretty.png" class="inspi-img"><div><h5 class="font-bold text-sm">Pretty Dollcorpse</h5><p class="text-[10px] opacity-60">Glitch / VSS</p></div></div></a>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="col-span-12 glass-panel p-0 text-center mb-32 overflow-hidden">
            <div class="win-header w-full"><span class="win-title">Contact.app</span></div>
            <div class="bg-[var(--accent-color)]/10 border-b border-[var(--accent-color)]/20 py-2">
                <div class="whitespace-nowrap flex animate-[marquee_20s_linear_infinite]">
                    <span class="px-4 font-mono text-xs font-bold text-[var(--accent-color)]">PROCHAINEMENT : NOUVEAUX DOCUS ‚Ä¢ CLIPS EN PREPA ‚Ä¢ COURT M√âTRAGE ‚Ä¢</span>
                </div>
            </div>
            <div class="p-12 flex flex-col items-center">
                 <button onclick="toggleVision()" class="mb-8 px-6 py-2 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 transition font-mono text-xs uppercase tracking-widest text-[var(--accent-color)] shadow-lg hover:scale-105">+ MA VISION</button>
                <div class="w-32 h-32 rounded-full border border-[var(--accent-color)]/30 p-1 mb-6"><img src="moi.png" class="w-full h-full rounded-full object-cover grayscale transition duration-500"></div>
                <h3 class="text-2xl font-bold mb-2">Travaillons ensemble</h3>
                <a href="mailto:jules.fremondiere@3is.fr" class="text-lg font-bold text-[var(--accent-color)] hover:underline">jules.fremondiere@3is.fr</a>
            </div>
        </section>

        <section id="sequencer" class="col-span-12 glass-panel p-0">
            <div class="win-header"><span class="win-title">Sequencer.vst (Touch to create)</span></div>
            <div id="sequencer-inner" class="p-6">
                <div class="flex flex-wrap justify-center gap-6 mb-8">
                    <button id="play-btn" class="transport-btn w-12 h-12" onclick="toggleSeq()"><svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></button>
                    <div class="flex items-center gap-2 bg-black/40 rounded px-3 py-2 border border-white/10">
                        <input type="range" min="60" max="180" value="120" class="w-24 accent-[var(--accent-color)]" oninput="updateBpm(this.value)">
                        <span id="bpm-display" class="font-mono text-xs w-16 text-center">120 BPM</span>
                    </div>
                </div>

                <div class="flex justify-center gap-4 mb-8 bg-black/20 p-4 rounded-xl">
                    <div class="fader-group"><input type="range" orient="vertical" min="0" max="100" value="80" oninput="updateVol('kick', this.value)"><label class="text-[9px] mt-2 font-mono">KICK</label></div>
                    <div class="fader-group"><input type="range" orient="vertical" min="0" max="100" value="70" oninput="updateVol('snare', this.value)"><label class="text-[9px] mt-2 font-mono">SNAR</label></div>
                    <div class="fader-group"><input type="range" orient="vertical" min="0" max="100" value="60" oninput="updateVol('hat', this.value)"><label class="text-[9px] mt-2 font-mono">HATS</label></div>
                    <div class="fader-group"><input type="range" orient="vertical" min="0" max="100" value="70" oninput="updateVol('synth', this.value)"><label class="text-[9px] mt-2 font-mono">SYN</label></div>
                </div>

                <div class="sequencer-grid-container">
                    <div class="min-w-[600px] space-y-2">
                        <div class="flex items-center gap-4"><span class="w-10 text-[10px] font-mono font-bold text-right opacity-60">KICK</span><div class="flex-1 grid grid-cols-16 gap-1" id="track-kick"></div></div>
                        <div class="flex items-center gap-4"><span class="w-10 text-[10px] font-mono font-bold text-right opacity-60">SNAR</span><div class="flex-1 grid grid-cols-16 gap-1" id="track-snare"></div></div>
                        <div class="flex items-center gap-4"><span class="w-10 text-[10px] font-mono font-bold text-right opacity-60">HATS</span><div class="flex-1 grid grid-cols-16 gap-1" id="track-hat"></div></div>
                        <div class="pt-4 border-t border-white/10 mt-4 flex items-start gap-4">
                             <span class="w-10 text-[10px] font-mono font-bold text-right opacity-60 pt-1">SYN</span>
                             <div class="flex-1 grid grid-template-columns-16 gap-1" id="piano-roll" style="display:grid; grid-template-columns: repeat(16, 1fr); gap: 2px;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <div id="vision-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity duration-300" onclick="toggleVision()"></div>
        <div class="glass-panel w-full max-w-2xl relative z-10 transform scale-95 opacity-0 transition-all duration-300" id="vision-content">
            <div class="win-header"><span class="win-title">Vision.dmg</span><button onclick="toggleVision()" class="hover:text-white">‚úï</button></div>
            <div class="p-8 space-y-8 overflow-y-auto max-h-[80vh] custom-scrollbar">
                <div><h4 class="text-[var(--accent-color)] font-bold uppercase text-xs tracking-widest mb-3">Mat√©riel Perso</h4><div class="bg-white/5 p-3 rounded font-mono text-xs">Scarlett Focusrite 2i2 ‚Ä¢ RODE NT1A ‚Ä¢ YAMAHA HS7 ‚Ä¢ DT 990 PRO ‚Ä¢ Macbook Pro M2 ‚Ä¢ √âcrans Apple Cinema Display</div></div>
                <div><h4 class="text-[var(--accent-color)] font-bold uppercase text-xs tracking-widest mb-3">Ma√Ætrise Technique</h4><div class="space-y-3 font-mono text-xs">
                    <div class="flex justify-between"><span>FL Studio</span><span>80%</span></div><div class="w-full bg-white/10 h-1.5 rounded"><div class="h-full bg-[var(--accent-color)]" style="width:80%"></div></div>
                    <div class="flex justify-between"><span>Ableton Live</span><span>75%</span></div><div class="w-full bg-white/10 h-1.5 rounded"><div class="h-full bg-[var(--accent-color)]" style="width:75%"></div></div>
                    <div class="flex justify-between"><span>Pro Tools</span><span>70%</span></div><div class="w-full bg-white/10 h-1.5 rounded"><div class="h-full bg-[var(--accent-color)]" style="width:70%"></div></div>
                    <div class="flex justify-between"><span>Premiere Pro</span><span>65%</span></div><div class="w-full bg-white/10 h-1.5 rounded"><div class="h-full bg-[var(--accent-color)]" style="width:65%"></div></div>
                </div></div>
                 <div><h4 class="text-[var(--accent-color)] font-bold uppercase text-xs tracking-widest mb-3">Outils R√©f</h4><div class="grid grid-cols-2 gap-2 text-xs font-mono"><div class="bg-white/5 p-2 rounded border border-white/10">Sennheiser MKH 416 & 50</div><div class="bg-white/5 p-2 rounded border border-white/10">Casque HD25 & Mixpre 633</div><div class="bg-white/5 p-2 rounded border border-white/10">SSL 2 & Yamaha HS7</div><div class="bg-white/5 p-2 rounded border border-white/10">Arturia V & Kilohearts</div></div></div>
            </div>
        </div>
    </div>

    <script>
        // 1. AUDIO CONTEXT & UNLOCK (CRITICAL FOR MOBILE)
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const audioCtx = new AudioContext();
        
        function unlockAudio() {
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
            document.removeEventListener('touchstart', unlockAudio);
            document.removeEventListener('click', unlockAudio);
        }
        document.addEventListener('touchstart', unlockAudio);
        document.addEventListener('click', unlockAudio);

        // INIT UI
        function initAudio() {
            unlockAudio();
            document.getElementById('start-screen').classList.add('hidden-screen');
            drawWaveforms(); // Draw random waveforms
        }

        // 2. THEMES
        function setTheme(name) {
            document.body.classList.add('switching-theme');
            setTimeout(() => document.body.classList.remove('switching-theme'), 300);
            
            if(name === 'ableton') document.body.classList.add('light-mode');
            else document.body.classList.remove('light-mode');

            const accents = { 'fl': '#22c55e', 'ableton': '#fb923c', 'protools': '#a855f7' };
            document.documentElement.style.setProperty('--accent-color', accents[name]);
            document.getElementById('theme-bg').style.backgroundImage = `url('${name}.png')`;
        }

        // 3. LAB RECORD (CANVAS VISUALIZER)
        const player = document.getElementById('global-player');
        let currentBtn = null;
        let animFrame;

        function drawWaveforms() {
            document.querySelectorAll('.waveform-canvas').forEach(canvas => {
                const ctx = canvas.getContext('2d');
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                
                // Draw fake waveform
                const bars = 60;
                const width = canvas.width / bars;
                ctx.fillStyle = 'rgba(255,255,255,0.4)';
                
                for(let i=0; i<bars; i++) {
                    const h = Math.random() * canvas.height * 0.8;
                    ctx.fillRect(i * width, (canvas.height - h)/2, width - 2, h);
                }
            });
        }
        window.addEventListener('resize', drawWaveforms);

        function toggleTrack(btn) {
            const row = btn.closest('.lab-row');
            const src = row.dataset.src;
            const progress = row.querySelector('.progress-overlay');

            if(currentBtn && currentBtn !== btn) {
                // Reset prev
                currentBtn.innerText = '[ Play / Pause ]';
                currentBtn.closest('.lab-row').classList.remove('playing');
                currentBtn.closest('.lab-row').querySelector('.progress-overlay').style.width = '0%';
            }

            if(player.src.includes(src) && !player.paused) {
                player.pause();
                btn.innerText = '[ Play ]';
                row.classList.remove('playing');
                cancelAnimationFrame(animFrame);
            } else {
                player.src = src;
                player.play().catch(e => console.log("Fichier audio non trouv√© (Demo Mode)"));
                btn.innerText = '[ Pause ]';
                row.classList.add('playing');
                currentBtn = btn;
                updateLabProgress(progress);
            }
        }

        function updateLabProgress(el) {
            if(player.paused) return;
            const pct = (player.currentTime / (player.duration || 1)) * 100;
            el.style.width = pct + '%';
            animFrame = requestAnimationFrame(() => updateLabProgress(el));
        }

        function seekTrack(e, container) {
            const rect = container.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            if(player.duration) player.currentTime = pos * player.duration;
            container.querySelector('.progress-overlay').style.width = (pos*100) + '%';
        }

        // 4. SEQUENCER ENGINE (PURE SYNTHESIS - NO ROMS)
        const masterVol = audioCtx.createGain();
        masterVol.gain.value = 0.4;
        masterVol.connect(audioCtx.destination);

        const vols = { kick: 0.8, snare: 0.8, hat: 0.5, synth: 0.6 };
        function updateVol(key, val) { vols[key] = (val/100) * (val/100); } // Logarithmic

        function playKick(t) {
            const osc = audioCtx.createOscillator();
            const g = audioCtx.createGain();
            osc.connect(g); g.connect(masterVol);
            osc.frequency.setValueAtTime(150, t);
            osc.frequency.exponentialRampToValueAtTime(0.01, t + 0.5);
            g.gain.setValueAtTime(vols.kick, t);
            g.gain.exponentialRampToValueAtTime(0.01, t + 0.5);
            osc.start(t); osc.stop(t + 0.5);
        }

        function playSnare(t) {
            const osc = audioCtx.createOscillator();
            const g = audioCtx.createGain();
            osc.type = 'triangle';
            osc.connect(g); g.connect(masterVol);
            g.gain.setValueAtTime(vols.snare, t);
            g.gain.exponentialRampToValueAtTime(0.01, t + 0.2);
            osc.start(t); osc.stop(t + 0.2);
            
            // Noise burst
            const bSize = audioCtx.sampleRate * 0.2;
            const b = audioCtx.createBuffer(1, bSize, audioCtx.sampleRate);
            const d = b.getChannelData(0);
            for(let i=0; i<bSize; i++) d[i] = Math.random() * 2 - 1;
            const noise = audioCtx.createBufferSource();
            noise.buffer = b;
            const ng = audioCtx.createGain();
            noise.connect(ng); ng.connect(masterVol);
            ng.gain.setValueAtTime(vols.snare * 0.6, t);
            ng.gain.exponentialRampToValueAtTime(0.01, t + 0.2);
            noise.start(t);
        }

        function playHat(t) {
            const bSize = audioCtx.sampleRate * 0.05;
            const b = audioCtx.createBuffer(1, bSize, audioCtx.sampleRate);
            const d = b.getChannelData(0);
            for(let i=0; i<bSize; i++) d[i] = Math.random() * 2 - 1;
            const noise = audioCtx.createBufferSource();
            noise.buffer = b;
            const f = audioCtx.createBiquadFilter(); f.type = 'highpass'; f.frequency.value = 6000;
            const g = audioCtx.createGain();
            noise.connect(f); f.connect(g); g.connect(masterVol);
            g.gain.setValueAtTime(vols.hat, t); g.gain.exponentialRampToValueAtTime(0.01, t + 0.05);
            noise.start(t);
        }

        function playSynth(freq, t) {
            const osc = audioCtx.createOscillator();
            const g = audioCtx.createGain();
            osc.type = 'sawtooth';
            osc.frequency.value = freq;
            const f = audioCtx.createBiquadFilter(); f.type = 'lowpass'; f.frequency.value = 1200;
            osc.connect(f); f.connect(g); g.connect(masterVol);
            g.gain.setValueAtTime(0, t);
            g.gain.linearRampToValueAtTime(vols.synth, t + 0.02);
            g.gain.exponentialRampToValueAtTime(0.001, t + 0.3);
            osc.start(t); osc.stop(t + 0.3);
        }

        // 5. SEQUENCER UI (Touch to Toggle)
        let isSeqPlaying = false;
        let seqInterval;
        let step = 0;
        let bpm = 120;
        
        const seqData = {
            KICK: new Array(16).fill(false),
            SNARE: new Array(16).fill(false),
            HAT: new Array(16).fill(false),
            SYNTH: Array(8).fill().map(() => new Array(16).fill(false))
        };
        const synthNotes = [523.25, 466.16, 392.00, 349.23, 311.13, 261.63, 233.08, 196.00];

        // Build Drums
        ['KICK', 'SNARE', 'HAT'].forEach(type => {
            const c = document.getElementById('track-'+type.toLowerCase());
            for(let i=0; i<16; i++) {
                const btn = document.createElement('div');
                btn.className = 'step-btn';
                // Touch to Toggle
                btn.onclick = () => { 
                    seqData[type][i] = !seqData[type][i];
                    btn.classList.toggle('active');
                    if(seqData[type][i]) { // Preview
                        if(type==='KICK') playKick(audioCtx.currentTime);
                        if(type==='SNARE') playSnare(audioCtx.currentTime);
                        if(type==='HAT') playHat(audioCtx.currentTime);
                    }
                };
                c.appendChild(btn);
            }
        });

        // Build Piano Roll
        const pContainer = document.getElementById('piano-roll');
        for(let r=0; r<8; r++) {
            for(let c=0; c<16; c++) {
                const cell = document.createElement('div');
                cell.className = 'piano-cell';
                cell.onclick = () => {
                    seqData.SYNTH[r][c] = !seqData.SYNTH[r][c];
                    cell.classList.toggle('active');
                    if(seqData.SYNTH[r][c]) playSynth(synthNotes[r], audioCtx.currentTime);
                };
                pContainer.appendChild(cell);
            }
        }

        function toggleSeq() {
            if(isSeqPlaying) {
                clearInterval(seqInterval);
                isSeqPlaying = false;
                document.getElementById('play-btn').classList.remove('playing');
            } else {
                unlockAudio();
                isSeqPlaying = true;
                document.getElementById('play-btn').classList.add('playing');
                seqInterval = setInterval(runSeq, (60/bpm)*250);
            }
        }

        function runSeq() {
            const now = audioCtx.currentTime;
            if(seqData.KICK[step]) playKick(now);
            if(seqData.SNARE[step]) playSnare(now);
            if(seqData.HAT[step]) playHat(now);
            
            for(let r=0; r<8; r++) {
                if(seqData.SYNTH[r][step]) playSynth(synthNotes[r], now);
            }
            
            // Visual feedback (Heavy DOM simplified)
            step = (step + 1) % 16;
        }

        function updateBpm(val) {
            bpm = val;
            document.getElementById('bpm-display').innerText = val + ' BPM';
            if(isSeqPlaying) { clearInterval(seqInterval); seqInterval = setInterval(runSeq, (60/bpm)*250); }
        }

        // UTILS
        function toggleVision() {
            const m = document.getElementById('vision-modal');
            m.classList.remove('hidden');
            setTimeout(() => m.classList.toggle('opacity-0'), 10);
            if(!m.classList.contains('opacity-0')) { // if closing
               setTimeout(() => m.classList.add('hidden'), 300);
            }
        }
        function closeVision() {
            const m = document.getElementById('vision-modal');
            m.classList.add('opacity-0');
            setTimeout(() => m.classList.add('hidden'), 300);
        }

        setTheme('fl');
    </script>
</body>
</html>

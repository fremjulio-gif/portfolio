<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DAW Portfolio - Jules F</title>
    <link rel="icon" type="image/png" href="moi.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700;800&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <style>
        /* --- CORE VARS --- */
        :root {
            --glass-surface: rgba(18, 18, 18, 0.6);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-highlight: rgba(255, 255, 255, 0.15);
            --glass-shadow: 0 40px 80px -12px rgba(0, 0, 0, 0.8);
            --glass-text: #ffffff;
            --accent-color: #22c55e;
            --ease-ios: cubic-bezier(0.25, 1, 0.5, 1);
            --vh: 1vh; 
        }

        /* --- FONTS --- */
        .font-fl { font-family: 'Arial', sans-serif; }
        .font-ableton { font-family: 'Jost', sans-serif; letter-spacing: 0.02em; }
        .font-protools { font-family: 'Avenir Next', 'Helvetica Neue', sans-serif; font-weight: 500; }
        .font-tech { font-family: 'Share Tech Mono', monospace; }

        /* --- GLOBAL --- */
        html, body { max-width: 100vw; overflow-x: hidden; user-select: none; cursor: crosshair; }
        body { 
            background-color: #050505; color: var(--glass-text); 
            transition: background-color 0.6s ease, color 0.4s ease, filter 0.3s ease;
            -webkit-text-size-adjust: 100%; margin: 0; padding: 0;
        }

        body.switching-theme { filter: blur(12px) brightness(1.2); transform: scale(0.98); }

        /* Light Mode */
        body.light-mode {
            --glass-surface: rgba(255, 255, 255, 0.2); 
            --glass-border: rgba(255, 255, 255, 0.3);
            --glass-highlight: rgba(255, 255, 255, 0.5);
            --glass-text: #1a1a1a;
            background-color: #A0A0A0;
        }
        body.light-mode .scanlines { opacity: 0.02; }
        body.light-mode .project-info { background: linear-gradient(to top, rgba(200,200,200,0.95), rgba(200,200,200,0.7), transparent); color: black; }
        body.light-mode #theme-label { color: #1a1a1a; font-weight: 800; text-shadow: none; opacity: 1; }
        
        body[data-theme='protools'] { background-color: #262626; }

        /* --- LIQUID GLASS PANELS --- */
        .glass-panel {
            background: linear-gradient(145deg, var(--glass-surface) 0%, rgba(255,255,255,0.02) 100%);
            backdrop-filter: blur(50px) saturate(140%); -webkit-backdrop-filter: blur(50px) saturate(140%);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow), inset 0 1px 0 0 var(--glass-highlight), inset 0 0 20px rgba(255,255,255,0.02);
            border-radius: 32px; overflow: hidden;
            transition: transform 0.5s var(--ease-ios), border-color 0.4s ease, box-shadow 0.4s ease;
            position: relative; width: 100%;
        }
        @media (hover: hover) {
            .glass-panel:hover { border-color: var(--accent-color); transform: translateY(-8px) scale(1.01); box-shadow: 0 50px 100px -20px rgba(0,0,0,0.7), inset 0 1px 0 0 var(--glass-highlight), 0 0 0 1px var(--accent-color); }
            .project-card:hover { transform: scale(0.95); filter: brightness(1.1); border-color: var(--accent-color); }
            .dock-icon:hover { color: #fff; transform: translateY(-5px); }
            body.light-mode .dock-icon:hover { color: #000; }
            .theme-pill:hover { opacity: 1; transform: scale(1.15); background: rgba(255,255,255,0.3); }
        }

        /* --- LAYOUT --- */
        .bento-grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 24px; padding: 100px 24px 140px; max-width: 1600px; margin: 0 auto; width: 100%; box-sizing: border-box; }
        .win-header { height: 44px; display: flex; align-items: center; justify-content: space-between; padding: 0 24px; border-bottom: 1px solid var(--glass-border); background: rgba(255,255,255,0.03); flex-shrink: 0; }
        .win-title { font-size: 11px; text-transform: uppercase; letter-spacing: 0.15em; font-weight: 800; opacity: 0.6; }
        
        .stat-item { display: flex; flex-direction: column; align-items: center; text-align: center; width: 100%; transition: transform 0.3s var(--ease-ios); padding: 10px; border-radius: 20px; }
        @media (min-width: 1024px) { .stat-item:hover { transform: translateY(-10px) scale(1.05); background: rgba(255,255,255,0.03); box-shadow: 0 10px 30px rgba(0,0,0,0.3); } }

        .pie-chart { width: 80px; height: 80px; border-radius: 50%; background: conic-gradient(var(--accent-color) calc(var(--percent) * 1%), rgba(255,255,255,0.05) 0); display: grid; place-items: center; flex-shrink: 0; margin: 0 auto 1rem; box-shadow: 0 10px 30px -5px rgba(0,0,0,0.3); position: relative; z-index: 10; }
        @media (min-width: 1024px) { .pie-chart { width: 130px; height: 130px; margin-bottom: 1.5rem; } .pie-chart span { font-size: 24px !important; } }
        .pie-chart::after { content: ''; position: absolute; inset: 8px; background: #111; border-radius: 50%; z-index: 1; box-shadow: inset 0 5px 15px rgba(0,0,0,0.5); }
        body.light-mode .pie-chart::after { background: #dcdcdc; box-shadow: inset 0 5px 15px rgba(0,0,0,0.1); }
        body[data-theme='protools'] .pie-chart::after { background: #262626; } 
        .pie-chart span { position: relative; z-index: 20; font-family: 'Share Tech Mono'; font-size: 16px; font-weight: bold; }

        .project-card { position: relative; border-radius: 20px; overflow: hidden; aspect-ratio: 4/3; cursor: pointer; border: 1px solid var(--glass-border); box-shadow: 0 10px 30px rgba(0,0,0,0.2); transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1), filter 0.4s; }
        @media (min-width: 768px) { .project-card { aspect-ratio: 16/10; } }
        .project-card img { width: 100%; height: 100%; object-fit: cover; transition: 0.6s var(--ease-ios); filter: brightness(0.8); }
        body.light-mode .project-card img { filter: brightness(1); }
        .project-info { opacity: 1; position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: flex-end; padding: 20px; background: linear-gradient(to top, rgba(0,0,0,0.9), rgba(0,0,0,0.4), transparent); }
        @media (min-width: 768px) { .project-info { padding: 24px; } }

        /* --- LAB & INSPIRATIONS --- */
        .lab-row { display: flex; flex-direction: column; justify-content: center; padding: 16px; border-bottom: 1px solid var(--glass-border); transition: 0.2s; position: relative; overflow: hidden; }
        .lab-row:last-child { border-bottom: none; }
        .lab-row:hover { background: rgba(255,255,255,0.05); }
        .lab-row.playing .text-xs { opacity: 1; }
        
        .lab-content-wrapper { display: flex; align-items: center; justify-content: space-between; position: relative; z-index: 20; }
        .lab-timeline-area { position: absolute; bottom: 0; left: 52px; right: 0; height: 100%; z-index: 10; cursor: pointer; }
        .lab-progress-bg { position: absolute; bottom: 0; left: 0; width: 100%; height: 6px; background: rgba(255,255,255,0.05); transition: height 0.2s; pointer-events: none; }
        .lab-row:hover .lab-progress-bg { height: 100%; background: rgba(255,255,255,0.08); } 
        .lab-progress-fill { height: 100%; background: var(--accent-color); width: 0%; opacity: 0.6; transition: width 0.1s linear; position: relative; }
        .lab-progress-fill::after { content: ''; position: absolute; right: 0; top: 0; bottom: 0; width: 2px; background: #fff; box-shadow: 0 0 10px #fff; opacity: 0; transition: opacity 0.2s; }
        .lab-row.playing .lab-progress-fill { opacity: 0.9; }
        .lab-row.playing .lab-progress-fill::after { opacity: 1; }

        .lab-btn-area { cursor: pointer; padding: 8px; margin: -8px; border-radius: 50%; transition: background 0.2s; z-index: 30; }
        .lab-btn-area:active { background: rgba(255,255,255,0.1); transform: scale(0.95); }

        /* Reference Library Refined */
        .inspi-card-large { position: relative; overflow: hidden; border-radius: 16px; border: 1px solid var(--glass-border); transition: all 0.4s var(--ease-ios); aspect-ratio: 16/9; cursor: pointer; opacity: 0; animation: fadeInUp 0.8s forwards; }
        .inspi-card-large:hover { transform: translateY(-5px); border-color: var(--accent-color); box-shadow: 0 15px 40px -10px rgba(0,0,0,0.5); }
        .inspi-card-large:hover img { transform: scale(1.05); filter: brightness(0.6); }
        .inspi-card-large:hover .inspi-content { opacity: 1; transform: translateY(0); }
        
        .inspi-img-large { width: 100%; height: 100%; object-fit: cover; transition: transform 0.6s ease, filter 0.4s ease; }
        .object-bottom-fix { object-position: bottom; }

        .inspi-content { position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: flex-end; padding: 20px; background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); opacity: 0; transform: translateY(10px); transition: all 0.4s ease; }
        @media (max-width: 768px) { .inspi-content { opacity: 1; transform: translateY(0); background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); } }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- PAD MACHINE (3x3) --- */
        .pad-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; height: 300px; }
        .drum-pad { 
            background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 12px; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            font-family: 'Share Tech Mono', monospace; font-size: 14px; letter-spacing: 1px; color: rgba(255,255,255,0.8);
            transition: all 0.05s; cursor: pointer; touch-action: manipulation; -webkit-tap-highlight-color: transparent;
            position: relative; overflow: hidden;
        }
        .drum-pad:active, .drum-pad.hit { background: var(--accent-color); color: #000; box-shadow: 0 0 25px var(--accent-color); transform: scale(0.96); border-color: transparent; }
        .pad-key-hint { font-size: 8px; opacity: 0.5; margin-top: 4px; border: 1px solid rgba(255,255,255,0.2); padding: 1px 4px; border-radius: 4px; }
        .drum-pad.hit .pad-key-hint { border-color: #000; opacity: 0.8; }

        /* --- DOCK & ISLAND --- */
        .dock-container { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; align-items: center; justify-content: center; gap: 16px; padding: 10px 24px; background: rgba(20, 20, 20, 0.7); backdrop-filter: blur(40px) saturate(150%); border: 1px solid var(--glass-border); border-radius: 30px; z-index: 90; height: 65px; width: 90%; max-width: 500px; box-shadow: 0 20px 40px -10px rgba(0,0,0,0.5), inset 0 1px 0 0 var(--glass-highlight); }
        body.light-mode .dock-container { background: rgba(255, 255, 255, 0.4); border-color: rgba(255,255,255,0.4); }
        .dock-icon { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; color: rgba(255,255,255,0.7); transition: 0.3s; cursor: pointer; height: 100%; width: auto; min-width: 40px; }
        @media (min-width: 1024px) { .dock-icon { width: 50px; } }
        body.light-mode .dock-icon { color: #444; }
        .dock-icon svg { width: 24px; height: 24px; }
        @media (min-width: 1024px) { .dock-icon svg { width: 26px; height: 26px; } }
        .dock-icon span { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 4px; display: none;}
        @media (min-width: 1024px) { .dock-icon span { display: block; } }
        .dock-divider { width: 1px; height: 30px; background: rgba(255,255,255,0.15); }

        .theme-island { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 90; background-color: rgba(20, 20, 20, 0.6); background-size: cover; background-position: center; backdrop-filter: blur(40px) saturate(150%); border: 1px solid var(--glass-border); border-radius: 100px; padding: 6px; display: flex; align-items: center; gap: 12px; transition: 0.5s; box-shadow: 0 15px 35px rgba(0,0,0,0.4), inset 0 1px 0 0 var(--glass-highlight); }
        @media (min-width: 768px) { .theme-island { top: 30px; padding: 8px 16px; gap: 16px; } }
        .theme-island::before { content: ''; position: absolute; inset: 0; background: rgba(0,0,0,0.3); border-radius: 100px; z-index: -1; }
        .theme-pill { width: 38px; height: 38px; border-radius: 50%; display: grid; place-items: center; cursor: pointer; border: 1px solid transparent; opacity: 0.7; transition: 0.3s; background: rgba(255,255,255,0.05); }
        @media (min-width: 768px) { .theme-pill { width: 48px; height: 48px; } }
        .theme-pill.active { opacity: 1; border-color: var(--accent-color); box-shadow: 0 0 20px var(--accent-color); background: rgba(0,0,0,0.6); }
        .theme-pill img { width: 20px; height: 20px; transform: scale(1.25); transition: transform 0.3s; }
        @media (min-width: 768px) { .theme-pill img { width: 24px; height: 24px; } }

        /* --- SEQUENCER --- */
        #sequencer-egg.hidden { display: none; }
        #sequencer-inner { position: relative; overflow: hidden; width: 100%; transition: height 0.3s ease; }
        #sequencer-inner::before { content: ''; position: absolute; inset: 0; background-size: cover; background-position: center; opacity: 0.15; z-index: 0; pointer-events: none; mix-blend-mode: overlay; filter: grayscale(100%) contrast(1.2); }
        .seq-tabs-container { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border-radius: 9999px; padding: 4px; display: inline-flex; gap: 0; border: 1px solid rgba(255,255,255,0.05); box-shadow: inset 0 2px 4px rgba(0,0,0,0.2); }
        body.light-mode .seq-tabs-container { background: rgba(0, 0, 0, 0.05); border-color: rgba(0,0,0,0.1); }
        .seq-tab-btn { background: transparent; color: rgba(255,255,255,0.6); padding: 8px 24px; border-radius: 9999px; font-family: 'Jost', sans-serif; font-size: 13px; font-weight: 600; letter-spacing: 0.5px; cursor: pointer; transition: all 0.3s; border: none; }
        body.light-mode .seq-tab-btn { color: #666; }
        .seq-tab-btn.active-tab { background: var(--accent-color); color: #000; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }

        .transport-btn { display: flex; align-items: center; justify-content: center; width: 36px; height: 36px; border-radius: 10px; background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.02)); border: 1px solid rgba(255,255,255,0.1); color: var(--accent-color); cursor: pointer; transition: 0.2s; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .transport-btn:hover { background: var(--accent-color); color: #000; }
        .transport-btn.playing { background: var(--accent-color); color: #000; box-shadow: 0 0 15px var(--accent-color); }

        .mixer-panel { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-in-out; background: linear-gradient(180deg, #1a1a1a 0%, #0a0a0a 100%); border-radius: 16px; margin-top: 10px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), 0 10px 30px rgba(0,0,0,0.5); width: 100%; }
        .mixer-panel.open { max-height: 240px; padding: 20px; border: 1px solid rgba(255,255,255,0.1); }
        .fader-group { display: flex; flex-direction: column; align-items: center; gap: 8px; flex: 1; }
        .fader-group label { font-family: 'Share Tech Mono', monospace; font-size: 10px; color: #666; letter-spacing: 1px; }
        
        .fader-wrapper { position: relative; width: 40px; height: 120px; display: flex; justify-content: center; }
        input[type=range][orient=vertical] { appearance: none; -webkit-appearance: none; position: absolute; top: 50%; left: 50%; width: 120px; height: 30px; transform: translate(-50%, -50%) rotate(-90deg); background: transparent; cursor: pointer; }
        input[type=range][orient=vertical]::-webkit-slider-runnable-track { width: 100%; height: 8px; cursor: pointer; background: #111; border: 1px solid #333; border-radius: 99px; box-shadow: inset 0 0 5px rgba(0,0,0,1); }
        input[type=range][orient=vertical]::-webkit-slider-thumb { -webkit-appearance: none; height: 20px; width: 30px; margin-left: 0; background: linear-gradient(to right, #555, #222); border-top: 1px solid #777; border-bottom: 1px solid #000; border-radius: 4px; box-shadow: 0 4px 5px rgba(0,0,0,0.8); margin-top: -6px; position: relative; z-index: 2; }
        input[type=range][orient=vertical]::-webkit-slider-thumb:active { background: var(--accent-color); border-color: #fff; }

        .sequencer-scroll-container { overflow-x: auto; padding-bottom: 16px; width: 100%; scrollbar-width: none; -ms-overflow-style: none; touch-action: pan-x; }
        .sequencer-scroll-container::-webkit-scrollbar { display: none; }
        .sequencer-track-row { min-width: 500px; touch-action: none; }
        .sequencer-track-row-large { min-width: 800px; touch-action: none; }
        
        .step-btn { height: 32px; width: 100%; border-radius: 6px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.05); transition: 0.1s; position: relative; z-index: 10; touch-action: none;}
        .step-btn.active { background: var(--accent-color); border-color: transparent; box-shadow: 0 0 12px var(--accent-color); }
        body.light-mode .step-btn { background: rgba(0,0,0,0.05); border-color: rgba(0,0,0,0.1); }
        body.light-mode .step-btn.active { background-color: #333; border-color: #333; box-shadow: none; }
        
        .piano-cell { background: rgba(255,255,255,0.03); border-radius: 4px; cursor: pointer; transition: 0.1s; border: 1px solid transparent; position: relative; z-index: 10; touch-action: none; }
        .piano-cell.note-start { background: var(--accent-color); opacity: 1; border-right: none; border-top-right-radius: 0; border-bottom-right-radius: 0; }
        .piano-cell.note-sustain { background: var(--accent-color); opacity: 0.7; border-left: none; border-radius: 0; }
        .piano-cell.note-sustain:last-child, .piano-cell.note-start:not(:has(+ .note-sustain)) { border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-right: 1px solid transparent; }
        .piano-cell.playing-col, .step-btn.playing-col { filter: brightness(1.5); }
        body.light-mode .piano-cell { background: rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.05); }
        body.light-mode .piano-cell.note-start { background-color: #333; } 
        body.light-mode .piano-cell.note-sustain { background-color: #555; }
        .piano-label { font-family: monospace; font-size: 9px; color: rgba(255,255,255,0.3); display: flex; align-items: center; justify-content: flex-end; padding-right: 4px; }
        body.light-mode .piano-label { color: #000; font-weight: bold; }

        /* --- SKILLS BACKGROUND --- */
        #skills { position: relative; overflow: hidden; }
        #skills::before { content: ''; position: absolute; inset: 0; background-size: cover; background-position: center; opacity: 0.1; z-index: 0; pointer-events: none; mix-blend-mode: overlay; }

        /* --- MARQUEE --- */
        @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .animate-marquee { display: flex; animation: marquee 15s linear infinite; width: max-content;}
        .marquee-item { padding-right: 40px; }

        /* --- VISION MODAL --- */
        #vision-modal { transition: opacity 0.3s ease; }
        #vision-modal.hidden { opacity: 0; pointer-events: none; display: none; }
        .vision-bar-container { background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px; overflow: hidden; width: 100%; }
        .vision-bar-fill { height: 100%; background: var(--accent-color); width: 0%; transition: width 1s ease-out; }
        body.light-mode .vision-bar-container { background: rgba(0,0,0,0.1); }

        /* --- LOADING BAR --- */
        .loading-container { width: 220px; height: 6px; background: rgba(255,255,255,0.1); border-radius: 99px; overflow: hidden; margin-top: 20px; position: relative; }
        .loading-bar { height: 100%; width: 0%; background: var(--accent-color); border-radius: 99px; animation: loadProject 2.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; box-shadow: 0 0 15px var(--accent-color); }
        @keyframes loadProject { 0% { width: 0%; } 40% { width: 60%; } 70% { width: 80%; } 100% { width: 100%; } }

        /* --- UTILS & BG --- */
        #start-screen { position: fixed; inset: 0; z-index: 100; background: #050505; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: 0.8s; }
        #start-screen.hidden-screen { opacity: 0; visibility: hidden; pointer-events: none; }
        .scroll-float { opacity: 0; transform: translateY(20px); transition: 0.8s var(--ease-ios); }
        .scroll-float.visible { opacity: 1; transform: translateY(0); }
        
        #theme-bg { position: fixed; top: 0; left: 0; width: 100%; height: 120%; z-index: -2; background-size: cover; background-position: center; opacity: 0.6; filter: blur(8px) saturate(1.1); transition: background-image 0.8s, opacity 0.8s; will-change: transform; }
        
        .scanlines { position: fixed; inset: 0; z-index: -1; pointer-events: none; background: linear-gradient(to bottom, transparent 50%, rgba(0,0,0,0.2) 50%); background-size: 100% 4px; opacity: 0.1; }

        @media (max-width: 1024px) {
            .bento-grid { display: flex; flex-direction: column; padding: 80px 16px 110px; width: 100%; max-width: 100%; }
            .glass-panel { width: 100%; margin-bottom: 24px; }
            .col-span-12, .col-span-8, .col-span-5, .col-span-7 { width: 100%; }
            .hero-name { font-size: 3.5rem; line-height: 1; word-break: break-word; }
            .mobile-center-controls { justify-content: center; width: 100%; }
        }
    </style>
</head>
<body class="font-fl selection:bg-white selection:text-black" data-theme="fl">

    <div id="start-screen">
        <div onclick="startExperience()" class="cursor-pointer flex flex-col items-center group">
            <h2 class="font-tech text-[var(--accent-color)] text-xl tracking-[0.3em] mb-2 group-hover:brightness-125 transition drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]">LOADING PROJECT</h2>
            <div class="font-mono text-xs text-gray-500 mb-6">Initializing Core Audio Engine...</div>
            <div class="loading-container">
                <div class="loading-bar"></div>
            </div>
            <div class="mt-8 text-[10px] text-gray-600 font-mono opacity-50">JULES_FREMONDIERE_V2.0.exe</div>
        </div>
    </div>

    <div id="theme-bg"></div>
    <div class="scanlines"></div>

    <div class="theme-island" id="theme-widget">
        <span id="theme-label" class="text-[10px] font-mono uppercase tracking-widest opacity-90 hidden md:block pt-1 drop-shadow-sm transition-colors duration-300">Pick your theme</span>
        <div class="flex gap-2">
            <button class="theme-pill click-sound touch-manipulation" onclick="setTheme('fl')" title="FL Studio">
                <img src="logo_flstudio.png" alt="FL" class="object-contain">
            </button>
            <button class="theme-pill click-sound touch-manipulation" onclick="setTheme('ableton')" title="Ableton">
                <img src="logo_ableton.png" alt="Live" class="object-contain">
            </button>
            <button class="theme-pill click-sound touch-manipulation" onclick="setTheme('protools')" title="ProTools">
                <img src="logo_protools.png" alt="PT" class="object-contain">
            </button>
        </div>
    </div>

    <main class="bento-grid">
        
        <section id="hero" class="col-span-12 glass-panel p-6 md:p-10 flex flex-col justify-center items-center text-center min-h-[80vh] md:min-h-[50vh] scroll-float relative group">
            <div class="relative z-10">
                <span class="inline-block px-4 py-1.5 rounded-full border border-[var(--glass-border)] bg-white/5 text-[10px] uppercase tracking-[0.2em] mb-8 backdrop-blur-md shadow-lg">Portfolio 2026</span>
                <h1 class="text-4xl md:text-6xl lg:text-8xl font-black tracking-tight mb-4 text-[var(--accent-color)] leading-[1.1] drop-shadow-2xl">Jules Fr√©mondi√®re</h1>
                <div class="inline-block bg-[var(--accent-color)]/10 border border-[var(--accent-color)] text-[var(--accent-color)] px-5 py-2 rounded-full text-xs font-bold uppercase tracking-widest animate-pulse mb-6 shadow-[0_0_20px_rgba(var(--accent-color),0.2)]">
                    üî¥ En recherche de stage
                </div>
                <p class="text-xl md:text-2xl lg:text-4xl opacity-80 font-light tracking-wide max-w-4xl mx-auto mt-2 leading-snug">√âtudiant Ing√©nieur du son & Sound Designer</p>
                <a href="mailto:jules.fremondiere@3is.fr" class="block mt-4 text-base md:text-lg text-[var(--glass-text)] opacity-60 hover:opacity-100 font-mono transition leading-normal">jules.fremondiere@3is.fr</a>
                <div class="mt-10 flex flex-col md:flex-row gap-4 justify-center w-full md:w-auto px-4 md:px-0">
                    <a href="#contact" class="px-8 py-4 rounded-full bg-[var(--accent-color)] text-black font-bold text-sm hover:scale-105 transition transform click-sound shadow-lg shadow-[var(--accent-color)]/30 text-center touch-manipulation tracking-wider">ME CONTACTER</a>
                    <a href="CV_FREMONDIEREJULES.pdf" download class="px-8 py-4 rounded-full border border-[var(--glass-border)] hover:bg-white/10 font-medium text-sm transition click-sound flex items-center justify-center gap-2 touch-manipulation tracking-wider backdrop-blur-md">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg> CV
                    </a>
                </div>
                <button onclick="unlockSequencer()" class="mt-8 text-[10px] uppercase tracking-[0.2em] opacity-40 hover:opacity-100 hover:text-[var(--accent-color)] transition-all font-mono border-b border-transparent hover:border-[var(--accent-color)] pb-1">
                    üîí Unlock Performance Mode
                </button>
            </div>
        </section>

        <section id="skills" class="col-span-12 lg:col-span-5 glass-panel scroll-float flex flex-col z-50 relative min-h-[50vh] md:min-h-0">
            <div class="win-header shrink-0">
                <span class="win-title">Stats & Skills.sys</span>
                <div class="flex gap-2"><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div></div>
            </div>
            <div class="p-6 md:p-8 grid grid-cols-2 gap-x-6 gap-y-10 items-start justify-items-center grow relative z-10">
                <div class="stat-item"><div class="pie-chart mb-3" style="--percent: 66"><span>66%</span></div><div class="h-8 flex items-center justify-center"><h4 class="text-sm md:text-xl font-bold uppercase tracking-widest text-[var(--accent-color)]">Mixage</h4></div><p class="text-xs md:text-sm opacity-70 leading-relaxed max-w-[200px] mt-1 mx-auto">√âcoute active, prise de d√©cision, Pro Tools.</p></div>
                <div class="stat-item"><div class="pie-chart mb-3" style="--percent: 70"><span>70%</span></div><div class="h-8 flex items-center justify-center"><h4 class="text-sm md:text-xl font-bold uppercase tracking-widest text-[var(--accent-color)]">Composition</h4></div><p class="text-xs md:text-sm opacity-70 leading-relaxed max-w-[200px] mt-1 mx-auto">Cr√©ativit√©, Organisation, Live 12.</p></div>
                <div class="stat-item"><div class="pie-chart mb-3" style="--percent: 40"><span>40%</span></div><div class="h-8 flex items-center justify-center"><h4 class="text-sm md:text-xl font-bold uppercase tracking-widest text-[var(--accent-color)]">Repair</h4></div><p class="text-xs md:text-sm opacity-70 leading-relaxed max-w-[200px] mt-1 mx-auto">Nettoyage Audio, RX 10, Ozone.</p></div>
                <div class="stat-item"><div class="pie-chart mb-3" style="--percent: 70"><span>70%</span></div><div class="h-8 flex items-center justify-center"><h4 class="text-sm md:text-xl font-bold uppercase tracking-widest text-[var(--accent-color)]">Recording</h4></div><p class="text-xs md:text-sm opacity-70 leading-relaxed max-w-[200px] mt-1 mx-auto">SoundDevice, Couple micro.</p></div>
                
                <button onclick="openVision()" class="col-span-2 mt-4 px-6 py-4 rounded-2xl border border-[var(--glass-border)] bg-white/5 hover:bg-white/10 transition group flex flex-col md:flex-row items-center justify-center gap-4 w-full cursor-pointer relative overflow-hidden shadow-lg hover:border-[var(--accent-color)]">
                    <div class="absolute inset-0 bg-[var(--accent-color)]/5 opacity-0 group-hover:opacity-100 transition duration-500"></div>
                     <span class="text-xs font-mono uppercase tracking-widest text-[var(--accent-color)] z-10 flex items-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
                        Ouvrir Vision.dmg & Setup
                     </span>
                </button>
            </div>
        </section>

        <section id="parcours" class="col-span-12 lg:col-span-7 glass-panel scroll-float z-10 relative min-h-[60vh] md:min-h-0">
            <div class="win-header">
                <span class="win-title">Timeline.log</span>
                <div class="flex gap-2"><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div></div>
            </div>
            <div class="p-6 md:p-8 h-full overflow-y-auto custom-scrollbar">
                <div class="relative pl-6 md:pl-8 border-l border-[var(--glass-border)] space-y-10 md:space-y-12">
                    <div class="relative group"><div class="absolute -left-[29px] md:-left-[37px] top-1 w-4 h-4 rounded-full border-2 border-[var(--accent-color)] bg-[#111] group-hover:scale-150 transition shadow-[0_0_10px_var(--accent-color)]"></div><span class="text-xs font-mono text-[var(--accent-color)] mb-1 block font-bold">2023 ‚Äì 2026</span><h3 class="text-lg md:text-xl font-bold">3iS - Institut International</h3><p class="text-sm uppercase tracking-wider opacity-60 mb-2">Bachelor Son √† l'image / Ing√©nieur du son</p><p class="text-sm md:text-base opacity-70 italic pl-3 border-l-2 border-[var(--accent-color)]">Prise en main de mat√©riel professionnel, Intervenants passionn√©s, D√©termination.</p></div>
                    <div class="relative group flex flex-col md:flex-row gap-6 items-start"><div class="flex-1"><div class="absolute -left-[29px] md:-left-[37px] top-1 w-4 h-4 rounded-full border-2 border-[var(--glass-border)] bg-[#111] group-hover:border-[var(--accent-color)] transition"></div><span class="text-xs font-mono opacity-50 mb-1 block">2023</span><h3 class="text-lg md:text-xl font-bold">Service Civique / C√©sure</h3><p class="text-sm md:text-base opacity-70 italic pl-3 border-l-2 border-[var(--glass-border)] mb-2">Projet Court M√©trage gr√¢ce a l‚Äôassociation Thermog√®ne M√©dia.</p><a href="https://www.youtube.com/watch?v=kxMZPKXg96U" target="_blank" class="text-xs border border-[var(--glass-border)] px-4 py-2 rounded-full hover:bg-white/10 inline-block transition click-sound touch-manipulation font-bold">‚ñ∂ Voir le projet vid√©o</a></div><div class="w-full md:w-32 h-32 md:h-24 shrink-0 rounded-lg overflow-hidden border border-[var(--glass-border)] mt-2 md:mt-0 shadow-lg"><img src="peace3.jpg" alt="Asso" class="w-full h-full object-cover grayscale hover:grayscale-0 transition duration-500 hover:scale-110"></div></div>
                    <div class="relative group"><div class="absolute -left-[29px] md:-left-[37px] top-1 w-4 h-4 rounded-full border-2 border-[var(--glass-border)] bg-[#111] group-hover:border-[var(--accent-color)] transition"></div><span class="text-xs font-mono opacity-50 mb-1 block">2022</span><h3 class="text-lg md:text-xl font-bold">BAC STI2D ITEC</h3><p class="text-sm md:text-base opacity-70 italic pl-3 border-l-2 border-[var(--glass-border)]">Esprit d‚Äô√©quipe, Informatique, Sens de la r√©flexion technique.</p></div>
                     <div class="relative group flex flex-col md:flex-row gap-6 items-start"><div class="flex-1"><div class="absolute -left-[29px] md:-left-[37px] top-1 w-4 h-4 rounded-full border-2 border-[var(--glass-border)] bg-[#111] group-hover:border-[var(--accent-color)] transition"></div><span class="text-xs font-mono opacity-50 mb-1 block">2018 ‚Äì 2022</span><h3 class="text-lg md:text-xl font-bold">Autodidacte & Exploration AV</h3><div class="mt-2 p-4 bg-white/5 rounded-xl border-l-2 border-[var(--accent-color)]"><ul class="list-disc list-inside text-sm opacity-70 space-y-1"><li>Composition musicale</li><li>Montage vid√©o</li></ul></div></div><div class="w-full md:w-32 h-32 md:h-24 shrink-0 rounded-lg overflow-hidden border border-[var(--glass-border)] mt-2 md:mt-0 shadow-lg"><img src="peace2.jpg" alt="Work" class="w-full h-full object-cover grayscale hover:grayscale-0 transition duration-500 hover:scale-110"></div></div>
                     <div class="relative group flex flex-col md:flex-row gap-6 items-start"><div class="flex-1"><div class="absolute -left-[29px] md:-left-[37px] top-1 w-4 h-4 rounded-full border-2 border-[var(--glass-border)] bg-[#111] group-hover:border-[var(--accent-color)] transition"></div><span class="text-xs font-mono opacity-50 mb-1 block">2010 ‚Äì 2014</span><h3 class="text-lg md:text-xl font-bold">Danseur Hip-Hop & Interpr√®te</h3><p class="text-sm md:text-base opacity-70 italic pl-3 border-l-2 border-[var(--glass-border)]">Tourn√©e Europ√©enne avec le chor√©graphe Boris Charmatz.</p></div><div class="w-full md:w-32 h-32 md:h-24 shrink-0 rounded-lg overflow-hidden border border-[var(--glass-border)] mt-2 md:mt-0 shadow-lg"><img src="peace.jpg" alt="Work" class="w-full h-full object-cover grayscale hover:grayscale-0 transition duration-500 hover:scale-110"></div></div>
                </div>
            </div>
        </section>

        <section id="projets" class="col-span-12 glass-panel p-0 scroll-float mt-8 relative">
            <div class="win-header">
                <span class="win-title">explorer.prproj</span>
                <div class="flex gap-2"><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div></div>
            </div>
            
            <div class="p-8 space-y-8">
                <h2 class="text-3xl md:text-4xl font-black flex items-center gap-4 tracking-tight"><span class="text-[var(--accent-color)]">///</span> Projets et Collaborations</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                    
                    <a href="https://youtu.be/9UOw2Qhdke0" target="_blank" class="project-card group click-sound touch-manipulation">
                        <img src="https://img.youtube.com/vi/9UOw2Qhdke0/hqdefault.jpg" alt="Je suis la fum√©e" class="object-cover scale-125 object-center">
                        <div class="project-info">
                            <div class="mb-auto opacity-0 group-hover:opacity-100 transition duration-500 hidden md:block">
                                <span class="border border-[var(--accent-color)] text-[var(--accent-color)] px-3 py-1.5 text-xs md:text-sm uppercase font-extrabold tracking-widest rounded-md bg-black/50 backdrop-blur-sm">Court-M√©trage</span>
                            </div>
                            <h4 class="text-2xl md:text-3xl font-bold mb-2 leading-tight drop-shadow-md">Je suis la fum√©e...</h4>
                            <p class="text-sm font-medium opacity-90 mb-4">Prise de son & Post-Prod</p>
                            <p class="font-mono text-[10px] opacity-70 border-t border-white/20 pt-3">Prise de son, Percheman, Red Voix Off</p>
                        </div>
                    </a>

                    <a href="https://on.soundcloud.com/XCZ6FO4IZUqG5q24R6" target="_blank" class="project-card group click-sound touch-manipulation">
                        <img src="cover.jpg" alt="Srh - qutumeregardes" class="object-cover object-bottom w-full h-full transition duration-500 group-hover:scale-105 object-bottom-fix">
                        <div class="project-info">
                            <div class="mb-auto opacity-0 group-hover:opacity-100 transition duration-500 hidden md:block">
                                <span class="border border-[var(--accent-color)] text-[var(--accent-color)] px-3 py-1.5 text-xs md:text-sm uppercase font-extrabold tracking-widest rounded-md bg-black/50 backdrop-blur-sm">Musique</span>
                            </div>
                            <h4 class="text-2xl md:text-3xl font-bold mb-2">Srh - qutumeregardes</h4>
                            <p class="text-sm font-medium opacity-90 mb-4">Mix & Master</p>
                            <p class="font-mono text-[10px] opacity-60 border-t border-white/20 pt-3">Mixage - Mastering</p>
                        </div>
                    </a>

                    <a href="https://www.youtube.com/watch?v=D-x6BQSPRuA" target="_blank" class="project-card group click-sound touch-manipulation">
                        <img src="https://img.youtube.com/vi/D-x6BQSPRuA/maxresdefault.jpg" alt="Capharna√ºm">
                        <div class="project-info">
                            <div class="mb-auto opacity-0 group-hover:opacity-100 transition duration-500 hidden md:block">
                                <span class="border border-[var(--accent-color)] text-[var(--accent-color)] px-3 py-1.5 text-xs md:text-sm uppercase font-extrabold tracking-widest rounded-md">Court-M√©trage</span>
                            </div>
                            <h4 class="text-2xl md:text-3xl font-bold mb-2">Capharna√ºm</h4>
                            <p class="text-sm font-medium opacity-90 mb-4">Sound Design & Mix</p>
                            <p class="font-mono text-[10px] opacity-60 border-t border-white/20 pt-3">Sound Design - Bruitage - Mix (ProTools, S1)</p>
                        </div>
                    </a>

                    <a href="https://www.youtube.com/watch?v=1RaxSos9wtk" target="_blank" class="project-card group click-sound touch-manipulation">
                        <img src="https://img.youtube.com/vi/1RaxSos9wtk/hqdefault.jpg" alt="Remix IVY">
                        <div class="project-info">
                            <div class="mb-auto opacity-0 group-hover:opacity-100 transition duration-500 hidden md:block">
                                <span class="border border-[var(--accent-color)] text-[var(--accent-color)] px-3 py-1.5 text-xs md:text-sm uppercase font-extrabold tracking-widest rounded-md">Remix</span>
                            </div>
                            <h4 class="text-2xl md:text-3xl font-bold mb-2">IVY - Baby Hayabusa</h4>
                            <p class="text-sm font-medium opacity-90 mb-4">Production Musicale</p>
                            <p class="font-mono text-[10px] opacity-60 border-t border-white/20 pt-3">Montage - DA - Composition - Mix - Master</p>
                        </div>
                    </a>

                    <a href="https://www.youtube.com/watch?v=TiqWW0e6RSg" target="_blank" class="project-card group click-sound touch-manipulation">
                        <img src="https://img.youtube.com/vi/TiqWW0e6RSg/maxresdefault.jpg" alt="D√©saccord√©s">
                        <div class="project-info">
                            <div class="mb-auto opacity-0 group-hover:opacity-100 transition duration-500 hidden md:block">
                                <span class="border border-[var(--accent-color)] text-[var(--accent-color)] px-3 py-1.5 text-xs md:text-sm uppercase font-extrabold tracking-widest rounded-md">√âmission TV Direct</span>
                            </div>
                            <h4 class="text-2xl md:text-3xl font-bold mb-2">D√©saccord√©s</h4>
                            <p class="text-sm font-medium opacity-90 mb-4">Ing√©nieur Son Direct</p>
                            <p class="font-mono text-[10px] opacity-60 border-t border-white/20 pt-3">Prise de d√©cision - Routing x32 - Com</p>
                        </div>
                    </a>

                    <a href="https://www.youtube.com/watch?v=w_9xYrwzKNs" target="_blank" class="project-card group click-sound touch-manipulation">
                        <img src="https://img.youtube.com/vi/w_9xYrwzKNs/maxresdefault.jpg" alt="Long Day">
                        <div class="project-info">
                            <div class="mb-auto opacity-0 group-hover:opacity-100 transition duration-500 hidden md:block">
                                <span class="border border-[var(--accent-color)] text-[var(--accent-color)] px-3 py-1.5 text-xs md:text-sm uppercase font-extrabold tracking-widest rounded-md">Clip Musical</span>
                            </div>
                            <h4 class="text-2xl md:text-3xl font-bold mb-2">Long Day</h4>
                            <p class="text-sm font-medium opacity-90 mb-4">Montage // Prise de vue</p>
                            <p class="font-mono text-[10px] opacity-60 border-t border-white/20 pt-3">Direction Artistique - Montage - Composition</p>
                        </div>
                    </a>

                    <a href="https://www.youtube.com/watch?v=llGoiisrlu8" target="_blank" class="project-card group click-sound touch-manipulation">
                        <img src="https://img.youtube.com/vi/llGoiisrlu8/maxresdefault.jpg" alt="Ouragan">
                        <div class="project-info">
                            <div class="mb-auto opacity-0 group-hover:opacity-100 transition duration-500 hidden md:block">
                                <span class="border border-[var(--accent-color)] text-[var(--accent-color)] px-3 py-1.5 text-xs md:text-sm uppercase font-extrabold tracking-widest rounded-md">R√©sidence</span>
                            </div>
                            <h4 class="text-2xl md:text-3xl font-bold mb-2">Ouragan</h4>
                            <p class="text-sm font-medium opacity-90 mb-4">Spatialisation Sonore</p>
                            <p class="font-mono text-[10px] opacity-60 border-t border-white/20 pt-3">Routing Console, Patch, Spatialisation</p>
                        </div>
                    </a>

                    <a href="https://www.youtube.com/watch?v=U3lwDA_INOQ" target="_blank" class="project-card group click-sound touch-manipulation">
                        <img src="https://img.youtube.com/vi/U3lwDA_INOQ/maxresdefault.jpg" alt="Instable">
                        <div class="project-info">
                            <div class="mb-auto opacity-0 group-hover:opacity-100 transition duration-500 hidden md:block">
                                <span class="border border-[var(--accent-color)] text-[var(--accent-color)] px-3 py-1.5 text-xs md:text-sm uppercase font-extrabold tracking-widest rounded-md">Webs√©rie</span>
                            </div>
                            <h4 class="text-2xl md:text-3xl font-bold mb-2">Instable</h4>
                            <p class="text-sm font-medium opacity-90 mb-4">Post-production Audio</p>
                            <p class="font-mono text-[10px] opacity-60 border-t border-white/20 pt-3">Supervision sonore, Prise de son, Post Prod</p>
                        </div>
                    </a>
                </div>
            </div>
        </section>
        
        <section id="lab" class="col-span-12 glass-panel p-0 scroll-float mt-8 relative z-20">
             <div class="win-header">
                <span class="win-title">Lab_Record.sh</span>
                <div class="flex gap-2"><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div></div>
            </div>
            <div class="p-6 font-mono">
                <div class="flex items-center gap-3 mb-6 text-[var(--accent-color)]">
                    <span class="animate-pulse">‚óè</span>
                    <span class="text-sm tracking-widest uppercase">Live Monitoring // Work In Progress</span>
                </div>
                
                <div class="space-y-0">
                    <div class="lab-row group" id="lab-row-1">
                        <div class="lab-content-wrapper">
                            <div class="flex items-center gap-4">
                                <div class="lab-btn-area w-8 h-8 flex items-center justify-center border border-white/10 rounded hover:border-[var(--accent-color)] transition shrink-0" onclick="playLabTrack('rover.mp3', document.getElementById('lab-row-1'), event, 'toggle')">
                                    <svg class="w-3 h-3 play-icon" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                                    <svg class="w-3 h-3 pause-icon hidden" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                                </div>
                                <div>
                                    <h4 class="text-sm font-bold">rover.mp3</h4>
                                    <p class="text-[10px] opacity-50">Ambient / Test Texture</p>
                                </div>
                            </div>
                            <span class="text-xs opacity-50 font-bold group-hover:text-[var(--accent-color)]">02:14</span>
                        </div>
                        <div class="lab-timeline-area" onclick="playLabTrack('rover.mp3', document.getElementById('lab-row-1'), event, 'seek')"></div>
                        <div class="lab-progress-bg">
                            <div class="lab-progress-fill"></div>
                        </div>
                    </div>
                     <div class="lab-row group" id="lab-row-2">
                        <div class="lab-content-wrapper">
                            <div class="flex items-center gap-4">
                                <div class="lab-btn-area w-8 h-8 flex items-center justify-center border border-white/10 rounded hover:border-[var(--accent-color)] transition shrink-0" onclick="playLabTrack('wordsnight.mp3', document.getElementById('lab-row-2'), event, 'toggle')">
                                    <svg class="w-3 h-3 play-icon" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                                    <svg class="w-3 h-3 pause-icon hidden" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                                </div>
                                <div>
                                    <h4 class="text-sm font-bold">wordsnight.mp3</h4>
                                    <p class="text-[10px] opacity-50">Vocal Chop / Lo-fi</p>
                                </div>
                            </div>
                            <span class="text-xs opacity-50 font-bold group-hover:text-[var(--accent-color)]">01:45</span>
                        </div>
                        <div class="lab-timeline-area" onclick="playLabTrack('wordsnight.mp3', document.getElementById('lab-row-2'), event, 'seek')"></div>
                        <div class="lab-progress-bg">
                            <div class="lab-progress-fill"></div>
                        </div>
                    </div>
                     <div class="lab-row group" id="lab-row-3">
                        <div class="lab-content-wrapper">
                            <div class="flex items-center gap-4">
                                <div class="lab-btn-area w-8 h-8 flex items-center justify-center border border-white/10 rounded hover:border-[var(--accent-color)] transition shrink-0" onclick="playLabTrack('shadow.mp3', document.getElementById('lab-row-3'), event, 'toggle')">
                                    <svg class="w-3 h-3 play-icon" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                                    <svg class="w-3 h-3 pause-icon hidden" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                                </div>
                                <div>
                                    <h4 class="text-sm font-bold">shadow.mp3</h4>
                                    <p class="text-[10px] opacity-50">Dark Synth / Bass</p>
                                </div>
                            </div>
                            <span class="text-xs opacity-50 font-bold group-hover:text-[var(--accent-color)]">03:02</span>
                        </div>
                         <div class="lab-timeline-area" onclick="playLabTrack('shadow.mp3', document.getElementById('lab-row-3'), event, 'seek')"></div>
                         <div class="lab-progress-bg">
                            <div class="lab-progress-fill"></div>
                        </div>
                    </div>
                </div>
            </div>
            <audio id="lab-audio-player" class="hidden"></audio>
        </section>

        <section id="inspirations" class="col-span-12 glass-panel p-0 scroll-float mt-8 relative z-20">
             <div class="win-header">
                <span class="win-title">Reference_Library</span>
                <div class="flex gap-2"><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div></div>
            </div>
            <div class="p-8">
                <h3 class="text-2xl font-mono mb-10 opacity-90 font-bold tracking-tight">Reference_Library</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                    <div>
                        <h4 class="text-base font-bold text-[var(--accent-color)] uppercase tracking-widest mb-6 border-b border-white/10 pb-2">S√©ries / Films</h4>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                            <div class="inspi-card-large group">
                                <img src="pluribus.webp" class="inspi-img-large">
                                <div class="inspi-content">
                                    <h5 class="font-bold text-lg text-white mb-1">Pluribus</h5>
                                    <p class="text-xs text-gray-300">SF, esth√©tique minimaliste, bruitages pr√©cis.</p>
                                </div>
                            </div>
                            <div class="inspi-card-large group">
                                <img src="theboys.webp" class="inspi-img-large">
                                <div class="inspi-content">
                                    <h5 class="font-bold text-lg text-white mb-1">The Boys</h5>
                                    <p class="text-xs text-gray-300">SF, futuriste, sound design recherch√©s.</p>
                                </div>
                            </div>
                            <div class="inspi-card-large group">
                                <img src="parasite.webp" class="inspi-img-large">
                                <div class="inspi-content">
                                    <h5 class="font-bold text-lg text-white mb-1">Parasite</h5>
                                    <p class="text-xs text-gray-300">Baroque, Glockenspiel, bruitages pr√©cis.</p>
                                </div>
                            </div>
                            <div class="inspi-card-large group">
                                <img src="midsommar.webp" class="inspi-img-large">
                                <div class="inspi-content">
                                    <h5 class="font-bold text-lg text-white mb-1">Midsommar</h5>
                                    <p class="text-xs text-gray-300">Mix r√©aliste, Contemplatif, Nappes Anxiog√®nes.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="text-base font-bold text-[var(--accent-color)] uppercase tracking-widest mb-6 border-b border-white/10 pb-2">Albums</h4>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                            <div class="inspi-card-large group">
                                <img src="425.webp" class="inspi-img-large">
                                <div class="inspi-content">
                                    <h5 class="font-bold text-lg text-white mb-1">Mike Dean "425"</h5>
                                    <p class="text-xs text-gray-300">Synth√©tique, Satur√©, Electro/Ambient.</p>
                                </div>
                            </div>
                            <div class="inspi-card-large group">
                                <img src="ftp.webp" class="inspi-img-large">
                                <div class="inspi-content">
                                    <h5 class="font-bold text-lg text-white mb-1">Femtogo</h5>
                                    <p class="text-xs text-gray-300">Introspectif, M√©lancolique, Jazz/Rap.</p>
                                </div>
                            </div>
                            <div class="inspi-card-large group col-span-1 sm:col-span-2">
                                <img src="pretty.png" class="inspi-img-large object-bottom-fix">
                                <div class="inspi-content">
                                    <h5 class="font-bold text-lg text-white mb-1">"PRETTY DOLLCORPSE"</h5>
                                    <p class="text-xs text-gray-300">Textures glitch√©s, VSS, Sampling.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="col-span-12 glass-panel p-0 text-center flex flex-col items-center justify-center gap-6 scroll-float mb-20 overflow-hidden">
            
            <div class="win-header w-full">
                <span class="win-title">Contact.app</span>
                <div class="flex gap-2"><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div></div>
            </div>

            <div class="w-full relative overflow-hidden py-3 border-b border-[var(--accent-color)]/20 bg-[var(--accent-color)]/5">
                <div class="absolute inset-0 z-0 opacity-20" style="background-image: url('peace.jpg'); background-size: cover; background-position: center; mix-blend-mode: overlay;"></div>
                <div class="whitespace-nowrap animate-marquee text-sm font-mono font-bold tracking-[0.2em] text-[var(--accent-color)] uppercase flex relative z-10">
                     <span class="marquee-item">PROCHAINEMENT : NOUVEAUX DOCUS ‚Ä¢ CLIPS EN PREPA ‚Ä¢ COURT M√âTRAGE ‚Ä¢</span>
                     <span class="marquee-item">PROCHAINEMENT : NOUVEAUX DOCUS ‚Ä¢ CLIPS EN PREPA ‚Ä¢ COURT M√âTRAGE ‚Ä¢</span>
                     <span class="marquee-item">PROCHAINEMENT : NOUVEAUX DOCUS ‚Ä¢ CLIPS EN PREPA ‚Ä¢ COURT M√âTRAGE ‚Ä¢</span>
                     <span class="marquee-item">PROCHAINEMENT : NOUVEAUX DOCUS ‚Ä¢ CLIPS EN PREPA ‚Ä¢ COURT M√âTRAGE ‚Ä¢</span>
                </div>
            </div>

            <div class="p-10 flex flex-col items-center">
                <div class="w-20 h-20 md:w-24 md:h-24 rounded-full p-1 border-2 border-[var(--accent-color)]">
                    <img src="moi.png" alt="Jules" class="w-full h-full rounded-full object-cover grayscale hover:grayscale-0 transition duration-500">
                </div>
                <div class="mt-6">
                    <h3 class="text-xl md:text-2xl font-bold">Travaillons ensemble</h3>
                    <p class="opacity-60 mt-2 text-sm md:text-base">Disponible pour projets cr√©atifs et techniques.</p>
                    <a href="mailto:jules.fremondiere@3is.fr" class="block mt-2 text-lg md:text-xl font-bold text-[var(--accent-color)] hover:underline break-all">jules.fremondiere@3is.fr</a>
                </div>
                <a href="https://linktr.ee/jlo.flp" target="_blank" class="mt-6 inline-flex items-center gap-2 text-[var(--glass-text)] border-b border-transparent hover:border-[var(--accent-color)] transition pb-1 touch-manipulation">
                    Linktree & R√©seaux <span>‚Üó</span>
                </a>
                <p class="font-mono text-[10px] opacity-30 mt-8">¬© 2026 SYSTEM JULES F.</p>
            </div>
        </section>

        <section id="sequencer-egg" class="col-span-12 glass-panel p-0 scroll-float border-[var(--accent-color)]/30 min-h-[40vh] md:min-h-0 shadow-[0_0_40px_-10px_var(--accent-color)]/20 opacity-80 hover:opacity-100 transition duration-500 hidden">
            <div class="win-header">
                <span class="win-title">sequencer.vst_easter_egg</span>
                <div class="flex gap-2"><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div><div class="w-2.5 h-2.5 rounded-full bg-white/20"></div></div>
            </div>
            <div id="sequencer-inner" class="bg-black/20 p-4 md:p-6 h-full relative">
                <div class="relative z-10">
                    
                    <div class="flex flex-col md:flex-row justify-center items-center mb-6 gap-6">
                        <div class="seq-tabs-container">
                            <button id="btn-pads" onclick="switchSequencer('pads')" class="seq-tab-btn active-tab touch-manipulation">9 PADS</button>
                            <button id="btn-large" onclick="switchSequencer('large')" class="seq-tab-btn touch-manipulation">PRO SEQ</button>
                        </div>
                        <div class="flex gap-4 items-center">
                            <button onclick="document.getElementById('mixer-panel').classList.toggle('open')" class="seq-tab-btn flex items-center gap-2 border-[var(--accent-color)] text-[var(--accent-color)] hover:bg-[var(--accent-color)] hover:text-black">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="21" x2="8" y2="3"></line><line x1="16" y1="21" x2="16" y2="3"></line><line x1="12" y1="21" x2="12" y2="3"></line><line x1="4" y1="21" x2="4" y2="3"></line><line x1="20" y1="21" x2="20" y2="3"></line></svg> MIXER
                            </button>
                            <div class="flex flex-col items-center">
                                <label class="text-[9px] font-mono text-gray-400">KEY</label>
                                <select id="key-select" class="bg-black/40 text-[10px] text-white border border-white/10 rounded px-1 h-6" onchange="updateMusicTheory()">
                                    <option value="C">C</option><option value="C#">C#</option><option value="D">D</option><option value="D#">D#</option><option value="E">E</option><option value="F">F</option><option value="F#">F#</option><option value="G">G</option><option value="G#">G#</option><option value="A">A</option><option value="A#">A#</option><option value="B">B</option>
                                </select>
                            </div>
                            <div class="flex flex-col items-center">
                                <label class="text-[9px] font-mono text-gray-400">SCALE</label>
                                <select id="scale-select" class="bg-black/40 text-[10px] text-white border border-white/10 rounded px-1 h-6" onchange="updateMusicTheory()">
                                    <option value="major">Major</option><option value="minor" selected>Minor</option><option value="pentaminor">Penta Min</option><option value="pentamajor">Penta Maj</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div id="mixer-panel" class="mixer-panel mb-4">
                        <div class="flex justify-around px-2 font-mono text-[9px] text-center text-gray-400">
                            <div class="fader-group"><div class="fader-wrapper"><input type="range" orient="vertical" min="0" max="100" value="90" oninput="setVol('kick', this.value)"></div><label>KICK</label></div>
                            <div class="fader-group"><div class="fader-wrapper"><input type="range" orient="vertical" min="0" max="100" value="80" oninput="setVol('snare', this.value)"></div><label>SNAR</label></div>
                            <div class="fader-group"><div class="fader-wrapper"><input type="range" orient="vertical" min="0" max="100" value="70" oninput="setVol('hat', this.value)"></div><label>HATS</label></div>
                            <div class="fader-group"><div class="fader-wrapper"><input type="range" orient="vertical" min="0" max="100" value="60" oninput="setVol('perc', this.value)"></div><label>PERC</label></div>
                            <div class="fader-group"><div class="fader-wrapper"><input type="range" orient="vertical" min="0" max="100" value="75" oninput="setVol('synth', this.value)"></div><label>SYN</label></div>
                        </div>
                    </div>

                    <div id="seq-pads-ui">
                         <div class="flex flex-col items-center justify-center h-full">
                            <div class="flex items-center gap-3 mb-6">
                                <div class="w-3 h-3 rounded-full bg-red-500 animate-pulse"></div>
                                <h3 class="font-tech text-base md:text-lg text-[var(--accent-color)] tracking-widest bg-black/50 px-2 rounded">INSTANT_PADS</h3>
                            </div>
                            <div class="pad-grid w-full max-w-md mx-auto" style="grid-template-columns: repeat(3, 1fr);">
                                <button class="drum-pad touch-manipulation" id="pad-0" onpointerdown="playPad('kick', this)"><span class="pad-key-hint">A / Q</span>KICK</button>
                                <button class="drum-pad touch-manipulation" id="pad-1" onpointerdown="playPad('snare', this)"><span class="pad-key-hint">Z / W</span>SNARE</button>
                                <button class="drum-pad touch-manipulation" id="pad-2" onpointerdown="playPad('hat', this)"><span class="pad-key-hint">E</span>HAT</button>
                                <button class="drum-pad touch-manipulation" id="pad-3" onpointerdown="playPad('perc1', this)"><span class="pad-key-hint">R</span>PERC 1</button>
                                <button class="drum-pad touch-manipulation" id="pad-4" onpointerdown="playPad('perc2', this)"><span class="pad-key-hint">T</span>PERC 2</button>
                                <button class="drum-pad touch-manipulation" id="pad-5" onpointerdown="playPad('synth', this, 261.63)"><span class="pad-key-hint">Y</span>C4</button>
                                <button class="drum-pad touch-manipulation" id="pad-6" onpointerdown="playPad('synth', this, 329.63)"><span class="pad-key-hint">U</span>E4</button>
                                <button class="drum-pad touch-manipulation" id="pad-7" onpointerdown="playPad('synth', this, 392.00)"><span class="pad-key-hint">I</span>G4</button>
                                <button class="drum-pad touch-manipulation" id="pad-8" onpointerdown="playPad('synth', this, 523.25)"><span class="pad-key-hint">O</span>C5</button>
                            </div>
                        </div>
                    </div>

                    <div id="seq-large-ui" class="hidden">
                        <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                            <div class="flex items-center gap-3 mb-2 md:mb-0">
                                <div id="seq-led-large" class="w-3 h-3 rounded-full bg-red-900 transition-colors"></div>
                                <h3 class="font-tech text-base md:text-lg text-[var(--accent-color)] tracking-widest bg-black/50 px-2 rounded">PRO_X16</h3>
                            </div>
                            <div class="flex flex-wrap gap-4 items-center mobile-center-controls">
                                <select id="kit-select-large" class="bg-black/50 border border-white/20 rounded px-2 py-1 text-[var(--glass-text)] text-xs h-8"><option value="standard">Standard</option><option value="analog">808 Analog</option><option value="lofi">Glitch</option></select>
                                <select id="synth-type" class="bg-black/50 border border-white/20 rounded px-2 py-1 text-[var(--glass-text)] text-xs h-8"><option value="sine">Sine</option><option value="square">Square</option><option value="sawtooth">Saw</option><option value="triangle">Tri</option></select>
                                <div class="flex items-center gap-2 bg-black/30 rounded px-2 py-1 h-8 border border-white/10">
                                    <input type="range" min="60" max="180" value="120" class="w-16 accent-[var(--accent-color)]" oninput="changeBpm(this.value)">
                                    <span id="bpm-display-large" class="font-mono text-xs text-[var(--accent-color)]">120 BPM</span>
                                </div>
                                <button id="play-btn-large" onclick="togglePlay('large')" class="transport-btn touch-manipulation"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3l14 9-14 9V3z"/></svg></button>
                                <button onclick="clearSequencer('large')" class="transport-btn touch-manipulation"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                            <div class="lg:col-span-3 space-y-3 overflow-hidden">
                                <div class="sequencer-scroll-container">
                                    <div class="sequencer-track-row-large space-y-2">
                                        <div class="flex items-center gap-3"><span class="font-mono text-xs w-10 opacity-60 font-bold bg-black/50 px-1 rounded shrink-0">KICK</span><div class="flex-1 grid grid-cols-16 gap-1" style="display:grid; grid-template-columns: repeat(16, 1fr); gap: 2px;" id="track-kick-large"></div></div>
                                        <div class="flex items-center gap-3"><span class="font-mono text-xs w-10 opacity-60 font-bold bg-black/50 px-1 rounded shrink-0">SNAR</span><div class="flex-1 grid grid-cols-16 gap-1" style="display:grid; grid-template-columns: repeat(16, 1fr); gap: 2px;" id="track-snare-large"></div></div>
                                        <div class="flex items-center gap-3"><span class="font-mono text-xs w-10 opacity-60 font-bold bg-black/50 px-1 rounded shrink-0">HATS</span><div class="flex-1 grid grid-cols-16 gap-1" style="display:grid; grid-template-columns: repeat(16, 1fr); gap: 2px;" id="track-hat-large"></div></div>
                                        <div class="flex items-center gap-3"><span class="font-mono text-xs w-10 opacity-60 font-bold bg-black/50 px-1 rounded shrink-0">PRC1</span><div class="flex-1 grid grid-cols-16 gap-1" style="display:grid; grid-template-columns: repeat(16, 1fr); gap: 2px;" id="track-perc1-large"></div></div>
                                        <div class="flex items-center gap-3"><span class="font-mono text-xs w-10 opacity-60 font-bold bg-black/50 px-1 rounded shrink-0">PRC2</span><div class="flex-1 grid grid-cols-16 gap-1" style="display:grid; grid-template-columns: repeat(16, 1fr); gap: 2px;" id="track-perc2-large"></div></div>
                                        <div class="pt-4 border-t border-[var(--glass-border)] mt-4">
                                            <div class="flex items-start gap-3">
                                                <span class="font-mono text-xs w-10 opacity-60 font-bold bg-black/50 px-1 rounded shrink-0 pt-1">SYN</span>
                                                <div id="piano-roll-large" class="flex-1 grid grid-template-columns-16 gap-1" style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="lg:col-span-1 bg-black/40 rounded-lg border border-[var(--glass-border)] relative overflow-hidden flex items-center justify-center h-[100px] lg:h-auto"><canvas id="scope-canvas-large" class="w-full h-full absolute inset-0"></canvas></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <div id="vision-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4 transition-opacity duration-300 opacity-0">
        <div onclick="closeVision()" class="absolute inset-0 bg-black/80 backdrop-blur-md cursor-pointer"></div>
        <div class="relative glass-panel w-full max-w-2xl transform transition-all duration-300 scale-95 opacity-0" id="vision-content">
             <div class="win-header">
                <span class="win-title">vision.dmg</span>
                <button onclick="closeVision()" class="text-white/50 hover:text-white transition">‚úï</button>
            </div>
            <div class="p-8 space-y-8 overflow-y-auto max-h-[80vh] custom-scrollbar">
                <div><h4 class="text-[var(--accent-color)] font-bold uppercase tracking-widest mb-4 flex items-center gap-2">Outils de r√©f√©rence</h4><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="bg-white/5 p-4 rounded-xl border border-white/10 flex items-center gap-4"><div class="w-10 h-10 bg-black/40 rounded-full flex items-center justify-center text-[var(--accent-color)] font-bold text-xs">416</div><div><h5 class="font-bold">Sennheiser MKH 416</h5><p class="text-xs opacity-60">Capture ext√©rieure, pr√©cision.</p></div></div><div class="bg-white/5 p-4 rounded-xl border border-white/10 flex items-center gap-4"><div class="w-10 h-10 bg-black/40 rounded-full flex items-center justify-center text-[var(--accent-color)] font-bold text-xs">50</div><div><h5 class="font-bold">Sennheiser MKH 50</h5><p class="text-xs opacity-60">Int√©rieurs, dialogue naturel.</p></div></div><div class="bg-white/5 p-4 rounded-xl border border-white/10 flex items-center gap-4"><div class="w-10 h-10 bg-black/40 rounded-full flex items-center justify-center text-[var(--accent-color)] font-bold text-xs">HD25</div><div><h5 class="font-bold">Casque HD25</h5><p class="text-xs opacity-60">Casque ind√©collable.</p></div></div><div class="bg-white/5 p-4 rounded-xl border border-white/10 flex items-center gap-4"><div class="w-10 h-10 bg-black/40 rounded-full flex items-center justify-center text-[var(--accent-color)] font-bold text-xs">633</div><div><h5 class="font-bold">Sound Devices 633</h5><p class="text-xs opacity-60">Mixette, pr√©cision.</p></div></div></div></div>
                <div><h4 class="text-[var(--accent-color)] font-bold uppercase tracking-widest mb-4">Ma√Ætrise Technique</h4><div class="space-y-4"><div><div class="flex justify-between text-xs font-mono mb-1"><span>FL Studio</span><span>80%</span></div><div class="vision-bar-container"><div class="vision-bar-fill" style="width: 80%"></div></div></div><div><div class="flex justify-between text-xs font-mono mb-1"><span>Ableton Live</span><span>75%</span></div><div class="vision-bar-container"><div class="vision-bar-fill" style="width: 75%"></div></div></div><div><div class="flex justify-between text-xs font-mono mb-1"><span>Pro Tools</span><span>70%</span></div><div class="vision-bar-container"><div class="vision-bar-fill" style="width: 70%"></div></div></div><div><div class="flex justify-between text-xs font-mono mb-1"><span>Premiere Pro</span><span>65%</span></div><div class="vision-bar-container"><div class="vision-bar-fill" style="width: 65%"></div></div></div></div></div>
                <div><h4 class="text-[var(--accent-color)] font-bold uppercase tracking-widest mb-4">Plugins F√©tiches</h4><div class="flex flex-wrap gap-2"><span class="px-3 py-1 rounded-full border border-white/10 bg-white/5 text-xs font-mono">Arturia V</span><span class="px-3 py-1 rounded-full border border-white/10 bg-white/5 text-xs font-mono">Kilohearts</span><span class="px-3 py-1 rounded-full border border-white/10 bg-white/5 text-xs font-mono">FabFilter</span><span class="px-3 py-1 rounded-full border border-white/10 bg-white/5 text-xs font-mono">Soundtoys</span><span class="px-3 py-1 rounded-full border border-white/10 bg-white/5 text-xs font-mono">Valhalla</span></div></div>
                <div><h4 class="text-[var(--accent-color)] font-bold uppercase tracking-widest mb-4">Mat√©riel Personnel</h4><div class="bg-white/5 p-4 rounded-xl border border-white/10 text-xs font-mono leading-relaxed opacity-80">Scarlett Focusrite 2i2 ‚Ä¢ RODE NT1A ‚Ä¢ YAMAHA HS7 ‚Ä¢ DT 990 PRO 250Ohm ‚Ä¢ Macbook Pro 2022 M2 24 Go RAM.</div></div>
            </div>
        </div>
    </div>

    <nav class="dock-container">
        <a href="#hero" class="dock-icon click-sound touch-manipulation"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 01-1 1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg><span>Home</span></a>
        <a href="#skills" class="dock-icon click-sound touch-manipulation"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg><span>Stats</span></a>
        <a href="#lab" class="dock-icon click-sound touch-manipulation"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/></svg><span>Lab</span></a>
        <a href="#projets" class="dock-icon click-sound touch-manipulation"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg><span>Work</span></a>
        <div class="dock-divider"></div>
        <div id="time-display" class="font-mono text-xs font-bold text-[var(--accent-color)] opacity-90 w-16 text-center">00:00:00</div>
    </nav>

    <script>
        // --- 1. UTILS & SYSTEM ---
        function setVh() { let vh = window.innerHeight * 0.01; document.documentElement.style.setProperty('--vh', `${vh}px`); }
        window.addEventListener('resize', setVh); setVh();

        // Parallax Effect
        window.addEventListener('scroll', () => { 
            const scrolled = window.pageYOffset; 
            const bg = document.getElementById('theme-bg');
            // Small transform to simulate distance
            if(bg) bg.style.transform = 'translateY(' + (scrolled * 0.15) + 'px)'; 
        });

        // Audio Context Setup
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const masterGain = audioCtx.createGain();
        const analyser = audioCtx.createAnalyser();
        masterGain.connect(analyser); analyser.connect(audioCtx.destination);
        analyser.fftSize = 256; masterGain.gain.value = 0.5;
        
        // --- MOBILE AUDIO UNLOCK FIX & GLOBAL LISTENER ---
        const unlockAudioContext = () => {
            if (audioCtx.state !== 'running') {
                audioCtx.resume().then(() => {
                    document.body.removeEventListener('click', unlockAudioContext);
                    document.body.removeEventListener('touchstart', unlockAudioContext);
                    document.body.removeEventListener('keydown', unlockAudioContext);
                });
            }
        };
        document.body.addEventListener('click', unlockAudioContext);
        document.body.addEventListener('touchstart', unlockAudioContext);
        document.body.addEventListener('keydown', unlockAudioContext);

        // --- 2. LAB PLAYER LOGIC (With Timelines) ---
        const labPlayer = document.getElementById('lab-audio-player');
        let currentPlayingRow = null;

        labPlayer.addEventListener('timeupdate', () => {
            if(!currentPlayingRow || labPlayer.duration === 0) return;
            const pct = (labPlayer.currentTime / labPlayer.duration) * 100;
            const fill = currentPlayingRow.querySelector('.lab-progress-fill');
            if(fill) fill.style.width = `${pct}%`;
        });
        
        labPlayer.onended = () => {
             if(currentPlayingRow) {
                currentPlayingRow.classList.remove('playing');
                currentPlayingRow.querySelector('.play-icon').classList.remove('hidden');
                currentPlayingRow.querySelector('.pause-icon').classList.add('hidden');
                const fill = currentPlayingRow.querySelector('.lab-progress-fill');
                if(fill) fill.style.width = '0%';
                currentPlayingRow = null;
             }
        };

        function drawVisualizer() {
            requestAnimationFrame(drawVisualizer);
            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);
            analyser.getByteFrequencyData(dataArray);
            // Visualizer logic (same as previous)
        }
        drawVisualizer(); 

        function playLabTrack(src, row, event, action) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            if (action === 'toggle') {
                if (currentPlayingRow === row && !labPlayer.paused) {
                    labPlayer.pause();
                    row.classList.remove('playing');
                    row.querySelector('.play-icon').classList.remove('hidden');
                    row.querySelector('.pause-icon').classList.add('hidden');
                    return;
                }
                if(labPlayer.src !== src && !src.endsWith(labPlayer.src.split('/').pop())) labPlayer.src = src;
                if (currentPlayingRow && currentPlayingRow !== row) {
                    currentPlayingRow.classList.remove('playing');
                    currentPlayingRow.querySelector('.play-icon').classList.remove('hidden');
                    currentPlayingRow.querySelector('.pause-icon').classList.add('hidden');
                    const prevFill = currentPlayingRow.querySelector('.lab-progress-fill');
                    if(prevFill) prevFill.style.width = '0%';
                }
                labPlayer.play();
                row.classList.add('playing');
                row.querySelector('.play-icon').classList.add('hidden');
                row.querySelector('.pause-icon').classList.remove('hidden');
                currentPlayingRow = row;
                
            } else if (action === 'seek') {
                if (currentPlayingRow !== row) {
                    playLabTrack(src, row, event, 'toggle');
                }
                const rect = event.currentTarget.getBoundingClientRect();
                const clickX = event.clientX - rect.left;
                const pct = Math.max(0, Math.min(1, clickX / rect.width));
                if (labPlayer.duration) {
                     labPlayer.currentTime = pct * labPlayer.duration;
                } else {
                     const seekOnLoad = () => {
                         labPlayer.currentTime = pct * labPlayer.duration;
                         labPlayer.removeEventListener('loadedmetadata', seekOnLoad);
                     };
                     labPlayer.addEventListener('loadedmetadata', seekOnLoad);
                }
            }
        }
        
        // --- 3. SEQUENCER CORE (STABILIZED) ---
        const trackVols = { kick: 0.9, snare: 0.8, hat: 0.7, perc: 0.6, synth: 0.75 };
        function setVol(track, val) { const normalized = val / 100; trackVols[track] = normalized * normalized; }

        function playClickSound() {
            if (!audioCtx || audioCtx.state === 'closed') return;
            if (audioCtx.state === 'suspended') { audioCtx.resume().then(() => { triggerClickOsc(); }).catch(e => console.error(e)); } else { triggerClickOsc(); }
        }
        function triggerClickOsc() {
            const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.type = 'triangle'; osc.frequency.setValueAtTime(2000, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(500, audioCtx.currentTime + 0.05);
            gain.gain.setValueAtTime(0.05, audioCtx.currentTime); gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.05);
            osc.start(); osc.stop(audioCtx.currentTime + 0.05);
        }
        function playThemeSwitchSound() {
            if (!audioCtx || audioCtx.state === 'suspended') return;
            // ... (Simple noise burst)
        }
        document.querySelectorAll('.click-sound').forEach(el => el.addEventListener('click', playClickSound));

        // Sequencer Init
        let isPlaying = false, currentStep = 0, intervalId = null, bpm = 120;
        let activeSequencer = 'pads';
        
        // --- VOICE MANAGEMENT SYSTEM ---
        const activeVoices = {}; 

        function stopVoice(track) {
            if (activeVoices[track]) {
                try {
                    if(activeVoices[track].gain && activeVoices[track].gain.gain) {
                         const g = activeVoices[track].gain.gain;
                         g.cancelScheduledValues(audioCtx.currentTime);
                         g.setValueAtTime(g.value, audioCtx.currentTime);
                         g.linearRampToValueAtTime(0, audioCtx.currentTime + 0.005);
                    }
                    if(activeVoices[track].source) {
                        activeVoices[track].source.stop(audioCtx.currentTime + 0.01);
                    }
                } catch(e) {}
                activeVoices[track] = null;
            }
        }

        // Improved Kit Logic
        const createNoise = (dur, vol, t) => {
            const bSize = audioCtx.sampleRate * dur; const b = audioCtx.createBuffer(1, bSize, audioCtx.sampleRate); const d = b.getChannelData(0);
            for(let i=0; i<bSize; i++) d[i] = Math.random() * 2 - 1;
            const n = audioCtx.createBufferSource(); n.buffer = b; const g = audioCtx.createGain();
            n.connect(g); g.connect(masterGain);
            g.gain.setValueAtTime(vol, t); g.gain.exponentialRampToValueAtTime(0.001, t + dur);
            n.start(t);
            return { source: n, gain: g };
        };

        const kits = {
            standard: {
                kick: (t) => { 
                    const o = audioCtx.createOscillator(); const g = audioCtx.createGain(); 
                    o.connect(g); g.connect(masterGain); 
                    o.frequency.setValueAtTime(150, t); o.frequency.exponentialRampToValueAtTime(0.01, t + 0.5); 
                    g.gain.setValueAtTime(trackVols.kick, t); g.gain.exponentialRampToValueAtTime(0.001, t + 0.5); 
                    o.start(t); o.stop(t + 0.5);
                    return { source: o, gain: g };
                },
                snare: (t) => { 
                    const n = createNoise(0.2, trackVols.snare, t);
                    const o = audioCtx.createOscillator(); const g = audioCtx.createGain(); 
                    o.connect(g); g.connect(masterGain); 
                    o.type='triangle'; o.frequency.setValueAtTime(250, t); 
                    g.gain.setValueAtTime(trackVols.snare * 0.5, t); g.gain.exponentialRampToValueAtTime(0.001, t+0.1); 
                    o.start(t); o.stop(t+0.1);
                    return n; // simplified return
                },
                hat: (t) => { 
                    const dur = 0.05;
                    const bSize = audioCtx.sampleRate * dur; const b = audioCtx.createBuffer(1, bSize, audioCtx.sampleRate); const d = b.getChannelData(0);
                    for(let i=0; i<bSize; i++) d[i] = Math.random() * 2 - 1;
                    const source = audioCtx.createBufferSource(); source.buffer = b; source.loop = false;
                    const filter = audioCtx.createBiquadFilter(); filter.type = 'highpass'; filter.frequency.value = 6000;
                    const gain = audioCtx.createGain();
                    gain.gain.setValueAtTime(trackVols.hat * 0.8, t);
                    gain.gain.exponentialRampToValueAtTime(0.001, t + dur); 
                    source.connect(filter); filter.connect(gain); gain.connect(masterGain);
                    source.start(t);
                    return { source: source, gain: gain };
                }
            },
            analog: {
                kick: (t) => { const o = audioCtx.createOscillator(); const g = audioCtx.createGain(); o.connect(g); g.connect(masterGain); o.type='square'; o.frequency.setValueAtTime(100, t); o.frequency.exponentialRampToValueAtTime(0.01, t + 0.8); g.gain.setValueAtTime(trackVols.kick, t); g.gain.exponentialRampToValueAtTime(0.001, t + 0.8); o.start(t); o.stop(t + 0.8); return {source:o, gain:g}; },
                snare: (t) => { return createNoise(0.3, trackVols.snare, t); },
                hat: (t) => { return createNoise(0.03, trackVols.hat, t); }
            },
            lofi: {
                kick: (t) => { const o = audioCtx.createOscillator(); const g = audioCtx.createGain(); o.connect(g); g.connect(masterGain); o.frequency.setValueAtTime(80, t); o.frequency.exponentialRampToValueAtTime(0.01, t + 0.3); g.gain.setValueAtTime(trackVols.kick * 0.8, t); g.gain.exponentialRampToValueAtTime(0.001, t + 0.3); o.start(t); o.stop(t + 0.3); return {source:o, gain:g}; },
                snare: (t) => { return createNoise(0.1, trackVols.snare * 0.6, t); },
                hat: (t) => { return createNoise(0.02, trackVols.hat * 0.5, t); }
            }
        };

        const seqLarge = { kick: Array(16).fill(0), snare: Array(16).fill(0), hat: Array(16).fill(0), perc1: Array(16).fill(0), perc2: Array(16).fill(0) };
        const melodyLarge = Array(8).fill().map(() => Array(16).fill(false));
        const notesLarge = [523.25, 493.88, 440.00, 392.00, 349.23, 329.63, 293.66, 261.63]; 
        const notesFreq = { 'C': 261.63, 'C#': 277.18, 'D': 293.66, 'D#': 311.13, 'E': 329.63, 'F': 349.23, 'F#': 369.99, 'G': 392.00, 'G#': 415.30, 'A': 440.00, 'A#': 466.16, 'B': 493.88 };
        const scaleIntervals = { 'major': [0, 2, 4, 5, 7, 9, 11, 12], 'minor': [0, 2, 3, 5, 7, 8, 10, 12], 'pentaminor': [0, 3, 5, 7, 10, 12], 'pentamajor': [0, 2, 4, 7, 9, 12] };
        let currentScaleNotesLarge = [...notesLarge];

        function createStepBtn(arrayRef, index, dataArray) {
            const btn = document.createElement('button'); btn.className = `step-btn click-sound touch-manipulation`;
            const toggle = (e) => {
                if (e.cancelable) e.preventDefault(); 
                if (audioCtx.state === 'suspended') audioCtx.resume();
                const state = !dataArray[index];
                dataArray[index] = state;
                btn.classList.toggle('active', state);
            };
            btn.addEventListener('pointerdown', toggle);
            return btn;
        }

        ['kick', 'snare', 'hat', 'perc1', 'perc2'].forEach(t => { const c = document.getElementById(`track-${t}-large`); for(let i=0; i<16; i++) c.appendChild(createStepBtn(seqLarge[t], i, seqLarge[t])); });

        function updatePianoRoll(mode) {
            const container = document.getElementById(`piano-roll-${mode}`); 
            if(!container) return;
            container.innerHTML = '';
            const rows = 8; const cols = 16;
            const gridData = melodyLarge; const currentNotes = currentScaleNotesLarge;
            for(let r=0; r<rows; r++) { for(let c=0; c<cols; c++) {
                    const cell = document.createElement('div'); cell.className = `piano-cell h-4 click-sound touch-manipulation relative`; cell.id = `note-${mode}-${r}-${c}`;
                    if (c === 0) { const noteName = getNoteNameFromFreq(currentNotes[r]); cell.innerHTML = `<span class="piano-label absolute left-0 top-0 text-[8px] opacity-40 pointer-events-none p-0.5">${noteName}</span>`; }
                    if (gridData[r][c]) { cell.classList.add('active'); if (gridData[r][c] === 1) cell.classList.add('note-start'); }
                    
                    cell.addEventListener('pointerdown', (e) => { 
                        if (e.cancelable) e.preventDefault();
                        if (audioCtx.state === 'suspended') audioCtx.resume();
                        const state = !gridData[r][c]; 
                        gridData[r][c] = state ? 1 : 0; 
                        updateCellVisual(cell, gridData[r][c]); 
                        cell.setPointerCapture(e.pointerId); 
                    });
                    container.appendChild(cell);
            }}
        }
        function updateCellVisual(cell, val) { cell.classList.remove('active', 'note-start', 'note-sustain'); if (val > 0) cell.classList.add('active'); if (val === 1) cell.classList.add('note-start'); }
        function getNoteNameFromFreq(freq) { const noteNames = Object.keys(notesFreq); let closestNote = ''; let minDiff = Infinity; for (const name of noteNames) { const f = notesFreq[name]; if (Math.abs(freq - f) < minDiff) { minDiff = Math.abs(freq - f); closestNote = name; } } return closestNote; }
        
        updatePianoRoll('large');
        
        function switchSequencer(mode) { 
            if(isPlaying && mode === 'pads') togglePlay('large'); 
            activeSequencer = mode; 
            if(mode === 'pads') { 
                document.getElementById('seq-pads-ui').classList.remove('hidden'); 
                document.getElementById('seq-large-ui').classList.add('hidden'); 
                document.getElementById('btn-pads').classList.add('active-tab'); 
                document.getElementById('btn-large').classList.remove('active-tab'); 
            } else { 
                document.getElementById('seq-pads-ui').classList.add('hidden'); 
                document.getElementById('seq-large-ui').classList.remove('hidden'); 
                document.getElementById('btn-pads').classList.remove('active-tab'); 
                document.getElementById('btn-large').classList.add('active-tab'); 
            } 
        }
            
        function togglePlay(target) { isPlaying = !isPlaying; const btn = document.getElementById(`play-btn-large`); const led = document.getElementById(`seq-led-large`);
            if(isPlaying) { 
                if(btn) btn.classList.add('playing'); 
                if(led) { led.classList.remove('bg-red-900'); led.classList.add('bg-red-500', 'animate-pulse'); }
                if(audioCtx.state==='suspended')audioCtx.resume(); 
                intervalId = setInterval(nextStep, (60/bpm)*1000/4); 
            } else { 
                if(btn) btn.classList.remove('playing'); 
                if(led) { led.classList.add('bg-red-900'); led.classList.remove('bg-red-500', 'animate-pulse'); }
                clearInterval(intervalId); resetVisuals(); currentStep = 0; 
            } 
        }

        function nextStep() { resetVisuals(); 
            if(audioCtx.state === 'interrupted' || audioCtx.state === 'suspended') { audioCtx.resume(); }
            const now = audioCtx.currentTime; const stepDuration = (60/bpm)/4; 
            const s = currentStep % 16; highlightColumn('large', s, 16, 8); const kName = document.getElementById('kit-select-large').value; const synthShape = document.getElementById('synth-type').value;
            if(seqLarge.kick[s]) playSound('kick', kName); if(seqLarge.snare[s]) playSound('snare', kName); if(seqLarge.hat[s]) playSound('hat', kName); if(seqLarge.perc1[s]) playSound('perc1', kName); if(seqLarge.perc2[s]) playSound('perc2', kName);
            for(let r=0; r<8; r++) { const cellVal = melodyLarge[r][s]; if (cellVal === 1) { playSynth(currentScaleNotesLarge[r], now, stepDuration, synthShape); } }
            currentStep = (currentStep + 1) % 16;
        }

        function highlightColumn(mode, colIdx, maxCols, maxRows) { const tracks = ['kick', 'snare', 'hat', 'perc1', 'perc2']; tracks.forEach(t => { const row = document.getElementById(`track-${t}-${mode}`); if(row && row.children[colIdx]) row.children[colIdx].classList.add('playing-col'); }); for(let r=0; r<maxRows; r++) { const cell = document.getElementById(`note-${mode}-${r}-${colIdx}`); if(cell) cell.classList.add('playing-col'); } }
        function resetVisuals() { document.querySelectorAll('.playing-col').forEach(el => el.classList.remove('playing-col')); }
        function clearSequencer(mode) { 
             seqLarge.kick.fill(0); seqLarge.snare.fill(0); seqLarge.hat.fill(0); seqLarge.perc1.fill(0); seqLarge.perc2.fill(0); melodyLarge.forEach(r=>r.fill(false)); 
             updatePianoRoll(mode); 
             const tracks = ['kick', 'snare', 'hat', 'perc1', 'perc2']; 
             tracks.forEach(t => { const c = document.getElementById(`track-${t}-${mode}`); if(c) Array.from(c.children).forEach(btn => btn.classList.remove('active')); }); 
        }
        function changeBpm(v) { bpm = v; document.getElementById('bpm-display-large').textContent = v + ' BPM'; if(isPlaying) { clearInterval(intervalId); intervalId = setInterval(nextStep, (60/bpm)*1000/4); } }

        function getScaleFrequencies(root, scaleType, count) { const baseFreq = notesFreq[root]; const intervals = scaleIntervals[scaleType]; const freqs = []; for(let i=0; i<count; i++) { const intervalIdx = i % intervals.length; const octave = Math.floor(i / intervals.length); const semitones = intervals[intervalIdx] + (octave * 12); const f = baseFreq * Math.pow(2, semitones / 12); freqs.push(f); } return freqs.reverse(); }
        function updateMusicTheory() { const root = document.getElementById('key-select').value; const scale = document.getElementById('scale-select').value; currentScaleNotesLarge = getScaleFrequencies(root, scale, 8); updatePianoRoll('large'); }
        
        function playSound(type, kitName) { 
            const now = audioCtx.currentTime; 
            stopVoice(type); 
            if(type === 'perc1' || type === 'perc2') { playPerc(type, now); return; } 
            
            let k = kits[kitName];
            if (!k) k = kits['standard'];
            
            if(k && k[type]) {
                const nodes = k[type](now);
                if(nodes) activeVoices[type] = nodes;
            }
        }
        
        // Pad Logic
        function playPad(soundType, el, freq) {
             if (audioCtx.state === 'suspended') audioCtx.resume();
             const now = audioCtx.currentTime;
             
             // Visual Feedback
             el.classList.add('hit');
             setTimeout(() => el.classList.remove('hit'), 100);
             
             if (soundType === 'synth' && freq) {
                 playSynth(freq, now, 0.2, 'sine');
             } else {
                 // Use current kit from large selection or default
                 const kName = document.getElementById('kit-select-large').value || 'standard';
                 playSound(soundType, kName);
             }
        }

        // Keyboard mapping for 3x3 pads (AZERTY & QWERTY support handled by key codes mostly)
        const padKeyMap = {
            'KeyA': 'pad-0', 'KeyQ': 'pad-0', // Top Left
            'KeyZ': 'pad-1', 'KeyW': 'pad-1', // Top Mid
            'KeyE': 'pad-2',                  // Top Right
            'KeyR': 'pad-3',                  // Mid Left
            'KeyT': 'pad-4',                  // Mid Mid
            'KeyY': 'pad-5',                  // Mid Right
            'KeyU': 'pad-6',                  // Bot Left
            'KeyI': 'pad-7',                  // Bot Mid
            'KeyO': 'pad-8'                   // Bot Right
        };

        window.addEventListener('keydown', (e) => {
            if (document.getElementById('sequencer-egg').classList.contains('hidden')) return; // Only if sequencer open
            const padId = padKeyMap[e.code];
            if (padId) {
                const padBtn = document.getElementById(padId);
                if (padBtn) {
                    // Trigger click event on the button to reuse logic
                    const event = new PointerEvent('pointerdown');
                    padBtn.dispatchEvent(event);
                }
            }
        });


        function playPerc(type, t) { 
            stopVoice(type);
            const o = audioCtx.createOscillator(), g = audioCtx.createGain(); 
            o.connect(g); g.connect(masterGain); 
            if (type === 'perc1') { o.type = 'sine'; o.frequency.setValueAtTime(800, t); g.gain.setValueAtTime(trackVols.perc, t); g.gain.exponentialRampToValueAtTime(0.01, t + 0.1); o.start(t); o.stop(t + 0.1); } 
            else { o.type = 'triangle'; o.frequency.setValueAtTime(200, t); o.frequency.exponentialRampToValueAtTime(100, t + 0.15); g.gain.setValueAtTime(trackVols.perc, t); g.gain.exponentialRampToValueAtTime(0.01, t + 0.2); o.start(t); o.stop(t + 0.2); } 
            activeVoices[type] = { source: o, gain: g };
        }

        function playSynth(freq, time, duration, shape = 'sine') { 
            stopVoice('synth');
            const o=audioCtx.createOscillator(), g=audioCtx.createGain(); 
            o.type=shape; o.frequency.value=freq; 
            o.connect(g); g.connect(masterGain); 
            const vol = trackVols.synth * 0.25; 
            g.gain.setValueAtTime(0, time); g.gain.linearRampToValueAtTime(vol, time + 0.02); 
            g.gain.setValueAtTime(vol, time + duration - 0.05); g.gain.exponentialRampToValueAtTime(0.001, time + duration); 
            o.start(time); o.stop(time + duration); 
            activeVoices['synth'] = { source: o, gain: g };
        }

        // --- 4. THEME & VISION ---
        const themes = { 
            fl: { bg: 'flstudio.png', bar: 'bar_flstudio.png', accent: '#22c55e', font: 'font-fl', mode: 'dark' }, 
            ableton: { bg: 'ableton.png', bar: 'bar_ableton.png', accent: '#fb923c', font: 'font-ableton', mode: 'light' }, 
            protools: { bg: 'protools.png', bar: 'bar_protools.png', accent: '#a855f7', font: 'font-protools', mode: 'dark' } 
        };
        function setTheme(name) { 
            playThemeSwitchSound(); document.body.classList.add('switching-theme'); setTimeout(() => document.body.classList.remove('switching-theme'), 300); const t = themes[name]; document.body.className = `${t.font} selection:bg-white selection:text-black`; if(t.mode === 'light') document.body.classList.add('light-mode'); else document.body.classList.remove('light-mode'); document.body.setAttribute('data-theme', name); document.documentElement.style.setProperty('--accent-color', t.accent); 
            document.getElementById('theme-bg').style.backgroundImage = `url('${t.bg}')`; 
            document.getElementById('theme-widget').style.backgroundImage = `url('${t.bar}')`;
            document.querySelectorAll('.theme-pill').forEach(b => b.classList.remove('active')); document.querySelector(`.theme-pill[onclick*="'${name}'"]`).classList.add('active'); 
        }

        const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if(entry.isIntersecting) entry.target.classList.add('visible'); }); }, {threshold: 0.1}); document.querySelectorAll('.scroll-float').forEach(el => observer.observe(el));
        
        function openVision() {
            const modal = document.getElementById('vision-modal');
            const content = document.getElementById('vision-content');
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                content.classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        function closeVision() {
            const modal = document.getElementById('vision-modal');
            const content = document.getElementById('vision-content');
            modal.classList.add('opacity-0');
            content.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        function unlockSequencer() {
            const seq = document.getElementById('sequencer-egg');
            seq.classList.remove('hidden');
            seq.scrollIntoView({ behavior: 'smooth' });
        }

        let autoStartTimer = setTimeout(() => { startExperience(true); }, 3000);
        function startExperience(isAuto = false) { clearTimeout(autoStartTimer); document.getElementById('start-screen').classList.add('hidden-screen'); if (!isAuto && audioCtx.state === 'suspended') audioCtx.resume();  }
        setInterval(() => { const now = new Date(); document.getElementById('time-display').textContent = now.toLocaleTimeString('fr-FR', {hour12:false}) + ':' + Math.floor(now.getMilliseconds()/10); }, 40);

        setTheme('fl');
    </script>
</body>
</html>
